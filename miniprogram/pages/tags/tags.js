"use strict";
var app = getApp();
Page({
    data: {
        tags: [
            {
                "cn": "资质",
                "cntags": ["新手", "资深干员", "高级资深干员"],
                "en": "Qualification",
                "entags": ["Newbie", "Senior", "Advanced Senior"]
            },
            {
                "cn": "位置",
                "cntags": ["远程位", "近战位"],
                "en": "Position",
                "entags": ["Ranged", "Melee"]
            },
            {
                "cn": "性别",
                "cntags": ["男性干员", "女性干员"],
                "en": "Gender",
                "entags": ["Male", "Female"]
            },
            {
                "cn": "种类",
                "cntags": ["先锋干员", "狙击干员", "医疗干员", "术师干员", "近卫干员", "重装干员", "辅助干员", "特种干员"],
                "en": "Class",
                "entags": ["Vanguard", "Sniper", "Medic", "Caster", "Guard", "Defender", "Support",
                    "Specialist"
                ]
            },
            {
                "cn": "词缀",
                "cntags": ["治疗", "支援", "输出", "群攻", "减速", "生存", "防护", "削弱", "位移", "控场", "爆发", "召唤",
                    "快速复活", "费用回复"
                ],
                "en": "Affix",
                "entags": ["Healing", "Support", "DPS", "Splash", "Slow", "Survival", "Protection",
                    "Debuffer", "Displacement", "Crowd Control", "Burst", "Summoner",
                    "Quick Resurrection", "Cost Recovery"
                ]
            }
        ],
        tags_aval: [],
        all_chars: {},
        avg_char_tag: 0,
        checkedTags: [],
        checkedTagsTL: []
    },
    onLoad: function () {
        console.log("666");
        this.calc();
    },
    bindViewTap: function () {
        wx.navigateTo({
            url: '../index/index'
        });
    },
    calc: function () {
        var len = this.data.checkedTags.length;
        var count = Math.pow(2, this.data.checkedTags.length);
        var combs = [];
        for (var i = 0; i < count; i++) {
            var ts = [];
            var tsTL = [];
            for (var j = 0, mask = 1; j < len; j++) {
                if ((i & mask) !== 0) {
                    ts.push(this.data.checkedTags[j]);
                    tsTL.push(this.data.checkedTagsTL[j]);
                }
                mask = mask * 2;
            }
            combs.push({
                "tags": ts,
                "tagsTL": tsTL,
                "score": 0.0,
                "possible": []
            });
        }
        var optStars = [];
        var that = this;
        combs.forEach(function (comb) {
            var tags = comb.tags;
            if (tags.length === 0 || tags.length > 3)
                return;
            var chars = that.data.tags_aval[tags[0]].slice();
            var _loop_1 = function (i) {
                var reduced_chars = [];
                chars.forEach(function (char) {
                    that.data.tags_aval[tags[i]].forEach(function (tgch) {
                        if (char.name === tgch.name) {
                            reduced_chars.push(char);
                            return false;
                        }
                    });
                });
                chars = reduced_chars;
            };
            for (var i = 1; i < tags.length; i++) {
                _loop_1(i);
            }
            if (chars.length === 0)
                return;
            if (!tags.includes("高级资深干员")) {
                var reduce6_1 = [];
                chars.forEach(function (char) {
                    if (char.level !== 6) {
                        reduce6_1.push(char);
                    }
                });
                chars = reduce6_1;
            }
            var filtered_chars;
            chars.forEach(function (char) {
                if (optStars.includes(char.level.toString())) {
                    filtered_chars.push(char);
                }
            });
            chars = filtered_chars;
            comb.possible = chars;
            if (chars.length === 0)
                return;
            var s = 0;
            chars.forEach(function (char) {
                s += char.level;
            });
            s = s / chars.length;
            comb.score = s + 0.1 / tags.length + 0.9 / chars.length;
        });
        combs.sort(function (a, b) {
            return a.score > b.score ? -1 : (a.score < b.score ? 1 :
                (a.tags.length > b.tags.length ? 1 : (a.tags.length < b.tags.length ? -1 :
                    0)));
        });
        combs.forEach(function (comb) {
            if (!comb.possible || comb.possible.length === 0)
                return;
            comb.possible.sort(function (a, b) {
                return a.level > b.level ? -1 : (a.level < b.level ? 1 : 0);
            });
        });
        var _that = this;
        app.func.get('/akhr.json', {}, function (data) {
            var tag_count = 0;
            var char_tag_sum = 0;
            data.forEach(function (char) {
                if (char.hidden)
                    return;
                char.tags.push(char.type + "干员");
                char.tags.push(char.sex + "性干员");
                var name = char.name;
                char.tags.forEach(function (tag) {
                    if (tag in _that.data.tags_aval) {
                        _that.data.tags_aval[tag].push({
                            "name": name,
                            "img": char["name-en"],
                            "level": char.level,
                            "type": char.type
                        });
                    }
                    else {
                        _that.data.tags_aval[tag] = [{
                                "name": name,
                                "img": char["name-en"],
                                "level": char.level,
                                "type": char.type
                            }];
                        tag_count++;
                    }
                    char_tag_sum++;
                });
                _that.data.all_chars[name] = {
                    'level': char.level,
                    'tags': char.tags
                };
            });
            _that.data.avg_char_tag = char_tag_sum / tag_count;
            console.log(data);
            _that.data.checkedTags.push("治疗");
            _that.calc();
        });
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGFncy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInRhZ3MudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUNBLElBQUksR0FBRyxHQUFHLE1BQU0sRUFBRSxDQUFBO0FBQ2xCLElBQUksQ0FBQztJQUNILElBQUksRUFBRTtRQUNKLElBQUksRUFBRTtZQUNKO2dCQUNFLElBQUksRUFBRSxJQUFJO2dCQUNWLFFBQVEsRUFBRSxDQUFDLElBQUksRUFBRSxNQUFNLEVBQUUsUUFBUSxDQUFDO2dCQUNsQyxJQUFJLEVBQUUsZUFBZTtnQkFDckIsUUFBUSxFQUFFLENBQUMsUUFBUSxFQUFFLFFBQVEsRUFBRSxpQkFBaUIsQ0FBQzthQUNsRDtZQUNEO2dCQUNFLElBQUksRUFBRSxJQUFJO2dCQUNWLFFBQVEsRUFBRSxDQUFDLEtBQUssRUFBRSxLQUFLLENBQUM7Z0JBQ3hCLElBQUksRUFBRSxVQUFVO2dCQUNoQixRQUFRLEVBQUUsQ0FBQyxRQUFRLEVBQUUsT0FBTyxDQUFDO2FBQzlCO1lBQ0Q7Z0JBQ0UsSUFBSSxFQUFFLElBQUk7Z0JBQ1YsUUFBUSxFQUFFLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQztnQkFDMUIsSUFBSSxFQUFFLFFBQVE7Z0JBQ2QsUUFBUSxFQUFFLENBQUMsTUFBTSxFQUFFLFFBQVEsQ0FBQzthQUM3QjtZQUNEO2dCQUNFLElBQUksRUFBRSxJQUFJO2dCQUNWLFFBQVEsRUFBRSxDQUFDLE1BQU0sRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxNQUFNLENBQUM7Z0JBQzFFLElBQUksRUFBRSxPQUFPO2dCQUNiLFFBQVEsRUFBRSxDQUFDLFVBQVUsRUFBRSxRQUFRLEVBQUUsT0FBTyxFQUFFLFFBQVEsRUFBRSxPQUFPLEVBQUUsVUFBVSxFQUFFLFNBQVM7b0JBQ2hGLFlBQVk7aUJBQ2I7YUFDRjtZQUNEO2dCQUNFLElBQUksRUFBRSxJQUFJO2dCQUNWLFFBQVEs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QUFDLENBQUMsSUFBSSxDQUFDOzRCQUM3QixNQUFNLEVBQUUsSUFBSTs0QkFDWixLQUFLLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQzs0QkFDdEIsT0FBTyxFQUFFLElBQUksQ0FBQyxLQUFLOzRCQUNuQixNQUFNLEVBQUUsSUFBSSxDQUFDLElBQUk7eUJBQ2xCLENBQUMsQ0FBQztxQkFDSjt5QkFBTTt3QkFDTCxLQUFLLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDO2dDQUMzQixNQUFNLEVBQUUsSUFBSTtnQ0FDWixLQUFLLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQztnQ0FDdEIsT0FBTyxFQUFFLElBQUksQ0FBQyxLQUFLO2dDQUNuQixNQUFNLEVBQUUsSUFBSSxDQUFDLElBQUk7NkJBQ2xCLENBQUMsQ0FBQzt3QkFDSCxTQUFTLEVBQUUsQ0FBQztxQkFDYjtvQkFDRCxZQUFZLEVBQUUsQ0FBQztnQkFDakIsQ0FBQyxDQUFDLENBQUM7Z0JBQ0gsS0FBSyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLEdBQUc7b0JBQzNCLE9BQU8sRUFBRSxJQUFJLENBQUMsS0FBSztvQkFDbkIsTUFBTSxFQUFFLElBQUksQ0FBQyxJQUFJO2lCQUNsQixDQUFDO1lBQ0osQ0FBQyxDQUFDLENBQUM7WUFDSCxLQUFLLENBQUMsSUFBSSxDQUFDLFlBQVksR0FBRyxZQUFZLEdBQUcsU0FBUyxDQUFDO1lBSW5ELE9BQU8sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUE7WUFDakIsS0FBSyxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ2xDLEtBQUssQ0FBQyxJQUFJLEVBQUUsQ0FBQztRQUNmLENBQUMsQ0FBQyxDQUFDO0lBR0wsQ0FBQztDQUtGLENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbIi8vdGFncy5qc1xudmFyIGFwcCA9IGdldEFwcCgpXG5QYWdlKHtcbiAgZGF0YToge1xuICAgIHRhZ3M6IFtcbiAgICAgIHtcbiAgICAgICAgXCJjblwiOiBcIui1hOi0qFwiLFxuICAgICAgICBcImNudGFnc1wiOiBbXCLmlrDmiYtcIiwgXCLotYTmt7HlubLlkZhcIiwgXCLpq5jnuqfotYTmt7HlubLlkZhcIl0sXG4gICAgICAgIFwiZW5cIjogXCJRdWFsaWZpY2F0aW9uXCIsXG4gICAgICAgIFwiZW50YWdzXCI6IFtcIk5ld2JpZVwiLCBcIlNlbmlvclwiLCBcIkFkdmFuY2VkIFNlbmlvclwiXVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgXCJjblwiOiBcIuS9jee9rlwiLFxuICAgICAgICBcImNudGFnc1wiOiBbXCLov5znqIvkvY1cIiwgXCLov5HmiJjkvY1cIl0sXG4gICAgICAgIFwiZW5cIjogXCJQb3NpdGlvblwiLFxuICAgICAgICBcImVudGFnc1wiOiBbXCJSYW5nZWRcIiwgXCJNZWxlZVwiXVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgXCJjblwiOiBcIuaAp+WIq1wiLFxuICAgICAgICBcImNudGFnc1wiOiBbXCLnlLfmgKflubLlkZhcIiwgXCLlpbPmgKflubLlkZhcIl0sXG4gICAgICAgIFwiZW5cIjogXCJHZW5kZXJcIixcbiAgICAgICAgXCJlbnRhZ3NcIjogW1wiTWFsZVwiLCBcIkZlbWFsZVwiXVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgXCJjblwiOiBcIuenjeexu1wiLFxuICAgICAgICBcImNudGFnc1wiOiBbXCLlhYjplIvlubLlkZhcIiwgXCLni5nlh7vlubLlkZhcIiwgXCLljLvnlpflubLlkZhcIiwgXCLmnK/luIjlubLlkZhcIiwgXCLov5HljavlubLlkZhcIiwgXCLph43oo4XlubLlkZhcIiwgXCLovoXliqnlubLlkZhcIiwgXCLnibnnp43lubLlkZhcIl0sXG4gICAgICAgIFwiZW5cIjogXCJDbGFzc1wiLFxuICAgICAgICBcImVudGFnc1wiOiBbXCJWYW5ndWFyZFwiLCBcIlNuaXBlclwiLCBcIk1lZGljXCIsIFwiQ2FzdGVyXCIsIFwiR3VhcmRcIiwgXCJEZWZlbmRlclwiLCBcIlN1cHBvcnRcIixcbiAgICAgICAgICBcIlNwZWNpYWxpc3RcIlxuICAgICAgICBdXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBcImNuXCI6IFwi6K+N57yAXCIsXG4gICAgICAgIFwiY250YWdzXCI6IFtcIuayu+eWl1wiLCBcIuaUr+aPtFwiLCBcIui+k+WHulwiLCBcIue+pOaUu1wiLCBcIuWHj+mAn1wiLCBcIueUn+WtmFwiLCBcIumYsuaKpFwiLCBcIuWJiuW8sVwiLCBcIuS9jeenu1wiLCBcIuaOp+WculwiLCBcIueIhuWPkVwiLCBcIuWPrOWUpFwiLFxuICAgICAgICAgIFwi5b+r6YCf5aSN5rS7XCIsIFwi6LS555So5Zue5aSNXCJcbiAgICAgICAgXSxcbiAgICAgICAgXCJlblwiOiBcIkFmZml4XCIsXG4gICAgICAgIFwiZW50YWdzXCI6IFtcIkhlYWxpbmdcIiwgXCJTdXBwb3J0XCIsIFwiRFBTXCIsIFwiU3BsYXNoXCIsIFwiU2xvd1wiLCBcIlN1cnZpdmFsXCIsIFwiUHJvdGVjdGlvblwiLFxuICAgICAgICAgIFwiRGVidWZmZXJcIiwgXCJEaXNwbGFjZW1lbnRcIiwgXCJDcm93ZCBDb250cm9sXCIsIFwiQnVyc3RcIiwgXCJTdW1tb25lclwiLFxuICAgICAgICAgIFwiUXVpY2sgUmVzdXJyZWN0aW9uXCIsIFwiQ29zdCBSZWNvdmVyeVwiXG4gICAgICAgIF1cbiAgICAgIH1cbiAgICBdLFxuICAgIHRhZ3NfYXZhbDogW10gPSBbXSxcbiAgICBhbGxfY2hhcnM6IHt9LFxuICAgIGF2Z19jaGFyX3RhZzogMCxcbiAgICBjaGVja2VkVGFnczogW10gPSBbXSxcbiAgICBjaGVja2VkVGFnc1RMOiBbXSA9IFtdXG5cbiAgfSxcblxuICBvbkxvYWQoKSB7XG4gICAgLy8gdGhpcy5zZXREYXRhISh7XG4gICAgLy8gICBsb2dzOiAod3guZ2V0U3RvcmFnZVN5bmMoJ2xvZ3MnKSB8fCBbXSkubWFwKChsb2c6IG51bWJlcikgPT4ge1xuICAgIC8vICAgICByZXR1cm4gZm9ybWF0VGltZShuZXcgRGF0ZShsb2cpKVxuICAgIC8vICAgfSlcbiAgICAvLyB9KVxuICAgIGNvbnNvbGUubG9nKFwiNjY2XCIpO1xuICAgIHRoaXMuY2FsYygpO1xuICB9LFxuXG4gIGJpbmRWaWV3VGFwKCkge1xuICAgIHd4Lm5hdmlnYXRlVG8oe1xuICAgICAgdXJsOiAnLi4vaW5kZXgvaW5kZXgnXG4gICAgfSlcbiAgfSxcblxuICBjYWxjKCkge1xuICAgIGxldCBsZW4gPSB0aGlzLmRhdGEuY2hlY2tlZFRhZ3MubGVuZ3RoO1xuICAgIGxldCBjb3VudCA9IE1hdGgucG93KDIsIHRoaXMuZGF0YS5jaGVja2VkVGFncy5sZW5ndGgpO1xuICAgIGxldCBjb21icyA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY291bnQ7IGkrKykge1xuICAgICAgbGV0IHRzOiBbXSA9IFtdO1xuICAgICAgbGV0IHRzVEw6IFtdID0gW107XG4gICAgICBmb3IgKGxldCBqID0gMCwgbWFzayA9IDE7IGogPCBsZW47IGorKykge1xuICAgICAgICBpZiAoKGkgJiBtYXNrKSAhPT0gMCkge1xuICAgICAgICAgIHRzLnB1c2godGhpcy5kYXRhLmNoZWNrZWRUYWdzW2pdKTtcbiAgICAgICAgICB0c1RMLnB1c2godGhpcy5kYXRhLmNoZWNrZWRUYWdzVExbal0pO1xuICAgICAgICB9XG4gICAgICAgIG1hc2sgPSBtYXNrICogMjtcbiAgICAgIH1cbiAgICAgIGNvbWJzLnB1c2goe1xuICAgICAgICBcInRhZ3NcIjogdHMsXG4gICAgICAgIFwidGFnc1RMXCI6IHRzVEwsXG4gICAgICAgIFwic2NvcmVcIjogMC4wLFxuICAgICAgICBcInBvc3NpYmxlXCI6IFtdXG4gICAgICB9KTtcbiAgICB9XG4gICAgLy8gY29uc29sZS5sb2coY29tYnMpOyBcbiAgICBsZXQgb3B0U3RhcnM6IHN0cmluZ1tdID0gW107XG4gICAgLy8gJChcIi5idG4tb3B0XCIpLmVhY2goZnVuY3Rpb24gKF8sIF9fKSB7XG4gICAgLy8gICBpZiAoJCh0aGlzKS5hdHRyKFwib3B0LWlkXCIpID09PSBcImFsbFwiIHx8ICQodGhpcykuaGFzQ2xhc3MoXCJidG4tc2Vjb25kYXJ5XCIpKSByZXR1cm47XG4gICAgLy8gICBvcHRTdGFycy5wdXNoKCQodGhpcykuYXR0cihcIm9wdC1pZFwiKSk7XG4gICAgLy8gfSk7XG4gICAgLy9jb25zb2xlLmxvZyhvcHRTdGFycyk7IFxuICAgIC8vJChcIiN0Ym9keS1yZWNvbW1lbmRcIikuaHRtbChcIlwiKTtcbiAgICB2YXIgdGhhdCA9IHRoaXM7Ly/miop0aGlz5a+56LGh5aSN5Yi25Yiw5Li05pe25Y+Y6YePdGhhdFxuICAgIGNvbWJzLmZvckVhY2goKGNvbWI6IGFueSkgPT4ge1xuICAgICAgbGV0IHRhZ3MgPSBjb21iLnRhZ3M7XG4gICAgICBpZiAodGFncy5sZW5ndGggPT09IDAgfHwgdGFncy5sZW5ndGggPiAzKSByZXR1cm47XG4gICAgICBsZXQgY2hhcnMgPSBbLi4udGhhdC5kYXRhLnRhZ3NfYXZhbFt0YWdzWzBdXV07XG4gICAgICBmb3IgKGxldCBpID0gMTsgaSA8IHRhZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGV0IHJlZHVjZWRfY2hhcnM6IFtdID0gW107XG5cbiAgICAgICAgY2hhcnMuZm9yRWFjaCgoY2hhcjogYW55KSA9PiB7XG4gICAgICAgICAgLy8gY29uc29sZS5sb2codGFnc19hdmFsW3RhZ3NbaV1dKTsgXG4gICAgICAgICAgLy8gY29uc29sZS5sb2coY2hhcik7IFxuICAgICAgICAgIHRoYXQuZGF0YS50YWdzX2F2YWxbdGFnc1tpXV0uZm9yRWFjaCgodGdjaDphbnkpID0+IHtcbiAgICAgICAgICAgIGlmIChjaGFyLm5hbWUgPT09IHRnY2gubmFtZSkge1xuICAgICAgICAgICAgICByZWR1Y2VkX2NoYXJzLnB1c2goY2hhcik7XG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNoYXJzID0gcmVkdWNlZF9jaGFycztcbiAgICAgIH1cblxuICAgICAgaWYgKGNoYXJzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuICAgICAgaWYgKCF0YWdzLmluY2x1ZGVzKFwi6auY57qn6LWE5rex5bmy5ZGYXCIpKSB7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHRhZ3Muam9pbihcIixcIikgKyBcIiDkuI3lkKso6auY57qnKei1hOa3seW5suWRmFwiKTsgXG4gICAgICAgIGxldCByZWR1Y2U2OiBhbnlbXSA9IFtdO1xuICAgICAgICBjaGFycy5mb3JFYWNoKGZ1bmN0aW9uIChjaGFyOiBhbnkpIHtcbiAgICAgICAgICBpZiAoY2hhci5sZXZlbCAhPT0gNikge1xuICAgICAgICAgICAgcmVkdWNlNi5wdXNoKGNoYXIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGNoYXJzID0gcmVkdWNlNjtcbiAgICAgIH1cbiAgICAgIGxldCBmaWx0ZXJlZF9jaGFyczogW107XG4gICAgICBjaGFycy5mb3JFYWNoKGZ1bmN0aW9uIChjaGFyOiBhbnkpIHtcbiAgICAgICAgLy9jb25zb2xlLmxvZyhjaGFyLmxldmVsKTsgXG4gICAgICAgIGlmIChvcHRTdGFycy5pbmNsdWRlcyhjaGFyLmxldmVsLnRvU3RyaW5nKCkpKSB7XG4gICAgICAgICAgZmlsdGVyZWRfY2hhcnMucHVzaChjaGFyKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBjaGFycyA9IGZpbHRlcmVkX2NoYXJzO1xuXG4gICAgICBjb21iLnBvc3NpYmxlID0gY2hhcnM7XG4gICAgICBpZiAoY2hhcnMubGVuZ3RoID09PSAwKSByZXR1cm47XG4gICAgICBsZXQgcyA9IDA7XG4gICAgICBjaGFycy5mb3JFYWNoKGZ1bmN0aW9uIChjaGFyOiBhbnkpIHtcbiAgICAgICAgcyArPSBjaGFyLmxldmVsO1xuICAgICAgfSk7XG4gICAgICBzID0gcyAvIGNoYXJzLmxlbmd0aDtcbiAgICAgIGNvbWIuc2NvcmUgPSBzICsgMC4xIC8gdGFncy5sZW5ndGggKyAwLjkgLyBjaGFycy5sZW5ndGg7XG4gICAgfSk7XG4gICAgY29tYnMuc29ydChmdW5jdGlvbiAoYSwgYikge1xuICAgICAgcmV0dXJuIGEuc2NvcmUgPiBiLnNjb3JlID8gLTEgOiAoYS5zY29yZSA8IGIuc2NvcmUgPyAxIDpcbiAgICAgICAgKGEudGFncy5sZW5ndGggPiBiLnRhZ3MubGVuZ3RoID8gMSA6IChhLnRhZ3MubGVuZ3RoIDwgYi50YWdzLmxlbmd0aCA/IC0xIDpcbiAgICAgICAgICAwKSkpO1xuICAgIH0pO1xuICAgIC8vbGV0IG5vID0gMTtcbiAgICBjb21icy5mb3JFYWNoKGZ1bmN0aW9uIChjb21iOiBhbnkpIHtcbiAgICAgIGlmICghY29tYi5wb3NzaWJsZSB8fCBjb21iLnBvc3NpYmxlLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuICAgICAgLy8gbGV0IGNoYXJzID0gY29tYi5wb3NzaWJsZTtcbiAgICAgIC8vIGxldCB0YWdzID0gY29tYi50YWdzO1xuICAgICAgLy8gbGV0IHRhZ3NUTCA9IGNvbWIudGFnc1RMO1xuICAgICAgLy8gbGV0IGNoYXJzX2h0bWwgOiBhbnlbXTtcbiAgICAgIC8vIGxldCBjb2xvcnMgPSB7XG4gICAgICAvLyAgIDE6IFwiZGFya1wiLFxuICAgICAgLy8gICAyOiBcImxpZ2h0XCIsXG4gICAgICAvLyAgIDM6IFwic3VjY2Vzc1wiLFxuICAgICAgLy8gICA0OiBcImluZm9cIixcbiAgICAgIC8vICAgNTogXCJ3YXJuaW5nXCIsXG4gICAgICAvLyAgIDY6IFwiZGFuZ2VyXCJcbiAgICAgIC8vIH07XG4gICAgICBjb21iLnBvc3NpYmxlLnNvcnQoZnVuY3Rpb24gKGE6IGFueSwgYjogYW55KSB7XG4gICAgICAgIHJldHVybiBhLmxldmVsID4gYi5sZXZlbCA/IC0xIDogKGEubGV2ZWwgPCBiLmxldmVsID8gMSA6IDApO1xuICAgICAgfSk7XG4gICAgICAvLyBjaGFycy5mb3JFYWNoKGZ1bmN0aW9uIChfOiBhbnksIGNoYXI6YW55KSB7XG4gICAgICAvLyAgIGxldCBwYWRkaW5nID0gc2hvd05hbWUgJiYgaW1hZ2VTaXplIDwgNjAgPyBcInBhZGRpbmctcmlnaHQ6IDRweFwiIDpcbiAgICAgIC8vICAgICBcInBhZGRpbmctcmlnaHQ6IDFweFwiO1xuICAgICAgLy8gICBsZXQgc3R5bGUgPSBzaG93SW1hZ2UgPyBcInN0eWxlPVxcXCJib3JkZXItcmFkaXVzOiA1cHg7cGFkZGluZzogMXB4IDFweDtcIiArXG4gICAgICAvLyAgICAgcGFkZGluZyArIFwiO1xcXCIgXCIgOiBcIlwiO1xuICAgICAgLy8gICBsZXQgYnV0dG9uc3R5bGUgPSBpbWFnZVNpemUgPiAyNSA/XG4gICAgICAvLyAgICAgXCJiYWNrZ3JvdW5kLWNvbG9yOiAjQUFBO2JvcmRlci1yYWRpdXM6IDRweDtcIiA6XG4gICAgICAvLyAgICAgXCJiYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudDtib3JkZXItcmFkaXVzOiA0cHg7XCI7XG4gICAgICAvLyAgIGNoYXJzX2h0bWwucHVzaChcIjxidXR0b24gdHlwZT1cXFwiYnV0dG9uXFxcIiBjbGFzcz1cXFwiYnRuIGJ0bi1zbSBidG4tXCIgK1xuICAgICAgLy8gICAgIGNvbG9yc1tjaGFyLmxldmVsXSArIFwiIGJ0bi1jaGFyIG15LTEgZC1ub25lIGQtc20taW5saW5lXFxcIiBcIiArXG4gICAgICAvLyAgICAgc3R5bGUgKyBcInRpdGxlPVxcXCJcIiArIGNoYXIubmFtZSArIFwiXFxcIj5cIik7XG4gICAgICAvLyAgIGlmIChzaG93SW1hZ2UpIGNoYXJzX2h0bWwucHVzaChcIjxpbWcgc3R5bGU9XFxcIlwiICsgYnV0dG9uc3R5bGUgK1xuICAgICAgLy8gICAgIFwiXFxcImhlaWdodD1cXFwiXCIgKyBpbWFnZVNpemUgKyBcIlxcXCIgd2lkdGg9XFxcIlwiICsgaW1hZ2VTaXplICtcbiAgICAgIC8vICAgICBcIlxcXCIgc3JjPVxcXCJpbWcvY2hhcmEvXCIgKyBjaGFyLmltZyArIFwiLnBuZ1xcXCI+ICAgXCIpO1xuICAgICAgLy8gICBpZiAoaW1hZ2VTaXplID4gNjApIGNoYXJzX2h0bWwucHVzaChcIjxkaXY+XCIpO1xuICAgICAgLy8gICBpZiAoc2hvd05hbWUpIGNoYXJzX2h0bWwucHVzaChjaGFyLm5hbWUpO1xuICAgICAgLy8gICBpZiAoaW1hZ2VTaXplID4gNjApIGNoYXJzX2h0bWwucHVzaChcIjwvZGl2PlwiKTtcbiAgICAgIC8vICAgY2hhcnNfaHRtbC5wdXNoKFwiPC9idXR0b24+XFxuXCIpO1xuICAgICAgLy8gICBjaGFyc19odG1sLnB1c2goXCI8YnV0dG9uIHR5cGU9XFxcImJ1dHRvblxcXCIgY2xhc3M9XFxcImJ0biBidG4tc20gYnRuLVwiICtcbiAgICAgIC8vICAgICBjb2xvcnNbY2hhci5sZXZlbF0gKyBcIiBidG4tY2hhciBteS0xIGQtaW5saW5lIGQtc20tbm9uZVxcXCIgXCIgK1xuICAgICAgLy8gICAgIFwidGl0bGU9XFxcIlwiICsgY2hhci5uYW1lICsgXCJcXFwiPlwiICsgY2hhci5uYW1lICsgXCI8L2J1dHRvbj5cXG5cIik7XG4gICAgICAvLyB9KTtcbiAgICAgIC8vbGV0IHRhZ3NfaHRtbCA9IFtdO1xuICAgICAgLy8gZm9yIChsZXQgaSA9IDA7IGkgPCB0YWdzLmxlbmd0aDsgaSsrKSB7XG5cbiAgICAgIC8vICAgICB0YWdzX2h0bWwucHVzaChcbiAgICAgIC8vICAgICAgICc8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImJ0biBidG4tc20gYnRuLXNlY29uZGFyeSBidG4tY2hhciBteS0xXCI+JyArXG4gICAgICAvLyAgICAgICB0YWdzW2ldICsgXCI8L2J1dHRvbj5cXG5cIik7XG5cbiAgICAgIC8vIH1cbiAgICAgIC8vICQoXCIjdGJvZHktcmVjb21tZW5kXCIpLmFwcGVuZChcbiAgICAgIC8vICAgXCI8dHIgY2xhc3M9XFxcInRyLXJlY29tbWRcXFwiPlwiICtcbiAgICAgIC8vICAgXCI8dGQgY2xhc3M9XFxcInB5LTIgZC1ub25lIGQtc20tdGFibGUtY2VsbFxcXCI+XCIgKyBubysrICsgXCI8L3RkPlwiICtcbiAgICAgIC8vICAgXCI8dGQgY2xhc3M9XFxcInB5LTFcXFwiPlwiICsgdGFnc19odG1sLmpvaW4oXCJcIikgKyBcIjwvdGQ+PHRkIGNsYXNzPVxcXCJweS0xXFxcIj5cIiArXG4gICAgICAvLyAgIGNoYXJzX2h0bWwuam9pbihcIlwiKSArXG4gICAgICAvLyAgIFwiPC90ZD5cIiArXG4gICAgICAvLyAgIFwiPHRkIGNsYXNzPVxcXCJweS0yIGQtbm9uZSBkLXNtLXRhYmxlLWNlbGxcXFwiPlwiICsgTWF0aC5mbG9vcihjb21iLnNjb3JlICpcbiAgICAgIC8vICAgICAxMDApIC8gMTAwICsgXCI8L3RkPlwiICtcbiAgICAgIC8vICAgXCI8L3RyPlwiKTtcblxuICAgIH0pO1xuICAgIC8vIGlmIChsYW5nICE9PSAnY24nKSAkKCdbZGF0YS10b2dnbGU9XCJ0b29sdGlwXCJdJykudG9vbHRpcCgpO1xuICAgIC8vaHR0cHM6Ly9hay5ncmF1ZW5la28ueHl6L2FraHIuanNvblxuICAgIGxldCBfdGhhdCA9IHRoaXM7XG4gICAgYXBwLmZ1bmMuZ2V0KCcvYWtoci5qc29uJywge30sIGZ1bmN0aW9uIChkYXRhOiBhbnkpIHtcblxuICAgICAgbGV0IHRhZ19jb3VudCA9IDA7XG4gICAgICBsZXQgY2hhcl90YWdfc3VtID0gMDtcbiAgICAgIC8vIGNvbnNvbGUubG9nKGRhdGEpOyBcbiAgICAgIGRhdGEuZm9yRWFjaChmdW5jdGlvbiAoY2hhcjogYW55KSB7XG4gICAgICAgIGlmIChjaGFyLmhpZGRlbikgcmV0dXJuO1xuICAgICAgICBjaGFyLnRhZ3MucHVzaChjaGFyLnR5cGUgKyBcIuW5suWRmFwiKTtcbiAgICAgICAgY2hhci50YWdzLnB1c2goY2hhci5zZXggKyBcIuaAp+W5suWRmFwiKTtcbiAgICAgICAgbGV0IG5hbWUgPSBjaGFyLm5hbWU7XG4gICAgICAgIGNoYXIudGFncy5mb3JFYWNoKGZ1bmN0aW9uICh0YWc6IGFueSkge1xuICAgICAgICAgIGlmICh0YWcgaW4gX3RoYXQuZGF0YS50YWdzX2F2YWwpIHtcbiAgICAgICAgICAgIF90aGF0LmRhdGEudGFnc19hdmFsW3RhZ10ucHVzaCh7XG4gICAgICAgICAgICAgIFwibmFtZVwiOiBuYW1lLFxuICAgICAgICAgICAgICBcImltZ1wiOiBjaGFyW1wibmFtZS1lblwiXSxcbiAgICAgICAgICAgICAgXCJsZXZlbFwiOiBjaGFyLmxldmVsLFxuICAgICAgICAgICAgICBcInR5cGVcIjogY2hhci50eXBlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgX3RoYXQuZGF0YS50YWdzX2F2YWxbdGFnXSA9IFt7XG4gICAgICAgICAgICAgIFwibmFtZVwiOiBuYW1lLFxuICAgICAgICAgICAgICBcImltZ1wiOiBjaGFyW1wibmFtZS1lblwiXSxcbiAgICAgICAgICAgICAgXCJsZXZlbFwiOiBjaGFyLmxldmVsLFxuICAgICAgICAgICAgICBcInR5cGVcIjogY2hhci50eXBlXG4gICAgICAgICAgICB9XTtcbiAgICAgICAgICAgIHRhZ19jb3VudCsrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjaGFyX3RhZ19zdW0rKztcbiAgICAgICAgfSk7XG4gICAgICAgIF90aGF0LmRhdGEuYWxsX2NoYXJzW25hbWVdID0ge1xuICAgICAgICAgICdsZXZlbCc6IGNoYXIubGV2ZWwsXG4gICAgICAgICAgJ3RhZ3MnOiBjaGFyLnRhZ3NcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgICAgX3RoYXQuZGF0YS5hdmdfY2hhcl90YWcgPSBjaGFyX3RhZ19zdW0gLyB0YWdfY291bnQ7XG5cblxuXG4gICAgICBjb25zb2xlLmxvZyhkYXRhKVxuICAgICAgX3RoYXQuZGF0YS5jaGVja2VkVGFncy5wdXNoKFwi5rK755aXXCIpO1xuICAgICAgX3RoYXQuY2FsYygpO1xuICAgIH0pO1xuXG5cbiAgfVxuXG5cblxuXG59KSJdfQ==