"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var app = getApp();
Page({
    data: {
        id: "",
        server: null,
        serverIndex: null,
        serverList: ['官服', 'B服', '其他'],
        clueList: {
            "need": [{ name: "1", showFlag: false }, { name: "2", showFlag: false }, { name: "3", showFlag: false }, { name: "4", showFlag: false }, { name: "5", showFlag: false }, { name: "6", showFlag: false }, { name: "7", showFlag: false }],
            "have": [{ name: "1", showFlag: false }, { name: "2", showFlag: false }, { name: "3", showFlag: false }, { name: "4", showFlag: false }, { name: "5", showFlag: false }, { name: "6", showFlag: false }, { name: "7", showFlag: false }]
        },
        remark: "",
        loading: false
    },
    PickerChange(e) {
        console.log(e);
        let tmp = this.data.serverList[e.detail.value];
        this.setData({
            serverIndex: e.detail.value,
            server: tmp
        });
    },
    InputChange: function (e) {
        console.log(e.target.dataset.type);
        console.log(e.detail.value);
        let type = e.target.dataset.type;
        if (type === 'remark') {
            this.setData({
                remark: e.detail.value
            });
        }
        else if (type === 'id') {
            this.setData({
                id: e.detail.value
            });
        }
    },
    clickClue(e) {
        console.log(e);
        let type = e.target.dataset.type;
        let clue = e.target.dataset.title;
        let clueTmp = this.data.clueList[type][clue];
        clueTmp.showFlag = !clueTmp.showFlag;
        let clueString = "clueList['" + type + "'][" + clue + "]";
        this.setData({
            clueList: this.data.clueList
        });
    },
    saveChange() {
        if (!this.data.id) {
            wx.showToast({
                title: "请输入游戏id",
                icon: "none",
                duration: 2000
            });
            return;
        }
        if (!this.data.server) {
            wx.showToast({
                title: "请选择游戏区服",
                icon: "none",
                duration: 2000
            });
            return;
        }
        let needFlag = false;
        let needStr = "";
        this.data.clueList['need'].forEach((clue) => {
            if (clue.showFlag) {
                needFlag = true;
                needStr += clue.name + " ";
            }
        });
        let haveFlag = false;
        let haveStr = "";
        this.data.clueList['have'].forEach((clue) => {
            if (clue.showFlag) {
                haveFlag = true;
                haveStr += clue.name + " ";
            }
        });
        if (!needFlag) {
            wx.showToast({
                title: "请选择至少一个需要的线索",
                icon: "none",
                duration: 2000
            });
            return;
        }
        if (!haveFlag) {
            wx.showToast({
                title: "请选择至少一个用来交换的线索",
                icon: "none",
                duration: 2000
            });
            return;
        }
        let req = { id: this.data.id, server: this.data.server, remark: this.data.remark, clueList: this.data.clueList };
        let that = this;
        let changeClueStr = this.data.id + " " + this.data.server + " " + haveStr + " 换 " + needStr;
        that.setData({
            loading: true
        });
        app.func.post('/postChange', req, function (response) {
            console.log(response);
            if (response.status === 200) {
                wx.setStorage({
                    key: "changeClue",
                    data: changeClueStr
                });
                that.setData({
                    loading: false
                });
                wx.showToast({
                    title: "发布成功",
                    icon: "none",
                    duration: 2000
                });
                wx.navigateBack({
                    delta: 1
                });
            }
        });
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmV3LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibmV3LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQ0EsSUFBSSxHQUFHLEdBQUcsTUFBTSxFQUFFLENBQUE7QUFFbEIsSUFBSSxDQUFDO0lBQ0gsSUFBSSxFQUFFO1FBQ0osRUFBRSxFQUFFLEVBQUU7UUFDTixNQUFNLEVBQUUsSUFBSTtRQUNaLFdBQVcsRUFBRSxJQUFJO1FBQ2pCLFVBQVUsRUFBRSxDQUFDLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDO1FBQzlCLFFBQVEsRUFBRTtZQUNSLE1BQU0sRUFBRSxDQUFDLEVBQUUsSUFBSSxFQUFFLEdBQUcsRUFBRSxRQUFRLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsR0FBRyxFQUFFLFFBQVEsRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRSxHQUFHLEVBQUUsUUFBUSxFQUFFLEtBQUssRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLEdBQUcsRUFBRSxRQUFRLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsR0FBRyxFQUFFLFFBQVEsRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRSxHQUFHLEVBQUUsUUFBUSxFQUFFLEtBQUssRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLEdBQUcsRUFBRSxRQUFRLEVBQUUsS0FBSyxFQUFFLENBQUM7WUFDeE8sTUFBTSxFQUFFLENBQUMsRUFBRSxJQUFJLEVBQUUsR0FBRyxFQUFFLFFBQVEsRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRSxHQUFHLEVBQUUsUUFBUSxFQUFFLEtBQUssRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLEdBQUcsRUFBRSxRQUFRLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsR0FBRyxFQUFFLFFBQVEsRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRSxHQUFHLEVBQUUs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LEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQTtRQUNoSCxJQUFJLElBQUksR0FBRyxJQUFJLENBQUM7UUFDaEIsSUFBSSxhQUFhLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLEdBQUcsR0FBRyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxHQUFHLEdBQUcsR0FBRyxPQUFPLEdBQUcsS0FBSyxHQUFHLE9BQU8sQ0FBQztRQUM1RixJQUFJLENBQUMsT0FBUSxDQUFDO1lBQ1osT0FBTyxFQUFFLElBQUk7U0FDZCxDQUFDLENBQUM7UUFDSCxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxhQUFhLEVBQUUsR0FBRyxFQUFFLFVBQVUsUUFBaUI7WUFDM0QsT0FBTyxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUV0QixJQUFJLFFBQVEsQ0FBQyxNQUFNLEtBQUssR0FBRyxFQUFFO2dCQUMzQixFQUFFLENBQUMsVUFBVSxDQUFDO29CQUNaLEdBQUcsRUFBRSxZQUFZO29CQUNqQixJQUFJLEVBQUUsYUFBYTtpQkFDcEIsQ0FBQyxDQUFBO2dCQUNGLElBQUksQ0FBQyxPQUFRLENBQUM7b0JBQ1osT0FBTyxFQUFFLEtBQUs7aUJBQ2YsQ0FBQyxDQUFDO2dCQUNILEVBQUUsQ0FBQyxTQUFTLENBQUM7b0JBQ1gsS0FBSyxFQUFFLE1BQU07b0JBQ2IsSUFBSSxFQUFFLE1BQU07b0JBQ1osUUFBUSxFQUFFLElBQUk7aUJBQ2YsQ0FBQyxDQUFBO2dCQUNGLEVBQUUsQ0FBQyxZQUFZLENBQUM7b0JBQ2QsS0FBSyxFQUFFLENBQUM7aUJBQ1QsQ0FBQyxDQUFBO2FBQ0g7UUFDSCxDQUFDLENBQUMsQ0FBQTtJQUNKLENBQUM7Q0FFRixDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBwYWdlcy9jaGFuZ2UvbmV3L25ldy5qc1xyXG52YXIgYXBwID0gZ2V0QXBwKClcclxuaW1wb3J0IEFya1Jlc3AgPSByZXF1aXJlKCcuLi8uLi9tb2RlbC9BcmtSZXNwLmpzJyk7XHJcblBhZ2Uoe1xyXG4gIGRhdGE6IHtcclxuICAgIGlkOiBcIlwiLFxyXG4gICAgc2VydmVyOiBudWxsLFxyXG4gICAgc2VydmVySW5kZXg6IG51bGwsXHJcbiAgICBzZXJ2ZXJMaXN0OiBbJ+WumOacjScsICdC5pyNJywgJ+WFtuS7liddLFxyXG4gICAgY2x1ZUxpc3Q6IHtcclxuICAgICAgXCJuZWVkXCI6IFt7IG5hbWU6IFwiMVwiLCBzaG93RmxhZzogZmFsc2UgfSwgeyBuYW1lOiBcIjJcIiwgc2hvd0ZsYWc6IGZhbHNlIH0sIHsgbmFtZTogXCIzXCIsIHNob3dGbGFnOiBmYWxzZSB9LCB7IG5hbWU6IFwiNFwiLCBzaG93RmxhZzogZmFsc2UgfSwgeyBuYW1lOiBcIjVcIiwgc2hvd0ZsYWc6IGZhbHNlIH0sIHsgbmFtZTogXCI2XCIsIHNob3dGbGFnOiBmYWxzZSB9LCB7IG5hbWU6IFwiN1wiLCBzaG93RmxhZzogZmFsc2UgfV0sXHJcbiAgICAgIFwiaGF2ZVwiOiBbeyBuYW1lOiBcIjFcIiwgc2hvd0ZsYWc6IGZhbHNlIH0sIHsgbmFtZTogXCIyXCIsIHNob3dGbGFnOiBmYWxzZSB9LCB7IG5hbWU6IFwiM1wiLCBzaG93RmxhZzogZmFsc2UgfSwgeyBuYW1lOiBcIjRcIiwgc2hvd0ZsYWc6IGZhbHNlIH0sIHsgbmFtZTogXCI1XCIsIHNob3dGbGFnOiBmYWxzZSB9LCB7IG5hbWU6IFwiNlwiLCBzaG93RmxhZzogZmFsc2UgfSwgeyBuYW1lOiBcIjdcIiwgc2hvd0ZsYWc6IGZhbHNlIH1dXHJcbiAgICB9LFxyXG4gICAgcmVtYXJrOiBcIlwiLFxyXG4gICAgbG9hZGluZzogZmFsc2VcclxuICB9LFxyXG5cclxuXHJcblxyXG5cclxuICBQaWNrZXJDaGFuZ2UoZTogYW55KSB7XHJcblxyXG4gICAgY29uc29sZS5sb2coZSk7XHJcbiAgICBsZXQgdG1wID0gdGhpcy5kYXRhLnNlcnZlckxpc3RbZS5kZXRhaWwudmFsdWVdO1xyXG4gICAgdGhpcy5zZXREYXRhISh7XHJcbiAgICAgIHNlcnZlckluZGV4OiBlLmRldGFpbC52YWx1ZSxcclxuICAgICAgc2VydmVyOiB0bXBcclxuICAgIH0pXHJcbiAgfSxcclxuXHJcbiAgSW5wdXRDaGFuZ2U6IGZ1bmN0aW9uIChlOiBhbnkpIHtcclxuICAgIGNvbnNvbGUubG9nKGUudGFyZ2V0LmRhdGFzZXQudHlwZSk7XHJcbiAgICBjb25zb2xlLmxvZyhlLmRldGFpbC52YWx1ZSlcclxuICAgIGxldCB0eXBlID0gZS50YXJnZXQuZGF0YXNldC50eXBlO1xyXG4gICAgaWYgKHR5cGUgPT09ICdyZW1hcmsnKSB7XHJcbiAgICAgIHRoaXMuc2V0RGF0YSEoe1xyXG4gICAgICAgIHJlbWFyazogZS5kZXRhaWwudmFsdWVcclxuICAgICAgfSlcclxuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ2lkJykge1xyXG4gICAgICB0aGlzLnNldERhdGEhKHtcclxuICAgICAgICBpZDogZS5kZXRhaWwudmFsdWVcclxuICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgfSxcclxuXHJcblxyXG5cclxuICBjbGlja0NsdWUoZTogYW55KSB7XHJcbiAgICBjb25zb2xlLmxvZyhlKTtcclxuICAgIGxldCB0eXBlID0gZS50YXJnZXQuZGF0YXNldC50eXBlO1xyXG4gICAgbGV0IGNsdWUgPSBlLnRhcmdldC5kYXRhc2V0LnRpdGxlO1xyXG5cclxuICAgIGxldCBjbHVlVG1wID0gdGhpcy5kYXRhLmNsdWVMaXN0W3R5cGVdW2NsdWVdO1xyXG4gICAgY2x1ZVRtcC5zaG93RmxhZyA9ICFjbHVlVG1wLnNob3dGbGFnO1xyXG4gICAgbGV0IGNsdWVTdHJpbmcgPSBcImNsdWVMaXN0WydcIiArIHR5cGUgKyBcIiddW1wiICsgY2x1ZSArIFwiXVwiO1xyXG4gICAgdGhpcy5zZXREYXRhISh7XHJcbiAgICAgIGNsdWVMaXN0OiB0aGlzLmRhdGEuY2x1ZUxpc3RcclxuICAgIH0pO1xyXG4gIH0sXHJcbiAgc2F2ZUNoYW5nZSgpIHtcclxuICAgIC8v5Yik5pat56m6XHJcbiAgICBpZiAoIXRoaXMuZGF0YS5pZCkge1xyXG4gICAgICB3eC5zaG93VG9hc3Qoe1xyXG4gICAgICAgIHRpdGxlOiBcIuivt+i+k+WFpea4uOaIj2lkXCIsXHJcbiAgICAgICAgaWNvbjogXCJub25lXCIsXHJcbiAgICAgICAgZHVyYXRpb246IDIwMDBcclxuICAgICAgfSlcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKCF0aGlzLmRhdGEuc2VydmVyKSB7XHJcbiAgICAgIHd4LnNob3dUb2FzdCh7XHJcbiAgICAgICAgdGl0bGU6IFwi6K+36YCJ5oup5ri45oiP5Yy65pyNXCIsXHJcbiAgICAgICAgaWNvbjogXCJub25lXCIsXHJcbiAgICAgICAgZHVyYXRpb246IDIwMDBcclxuICAgICAgfSlcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBsZXQgbmVlZEZsYWcgPSBmYWxzZTtcclxuICAgIGxldCBuZWVkU3RyID0gXCJcIjtcclxuICAgIHRoaXMuZGF0YS5jbHVlTGlzdFsnbmVlZCddLmZvckVhY2goKGNsdWU6IGFueSkgPT4ge1xyXG4gICAgICBpZiAoY2x1ZS5zaG93RmxhZykge1xyXG4gICAgICAgIG5lZWRGbGFnID0gdHJ1ZTtcclxuICAgICAgICBuZWVkU3RyICs9IGNsdWUubmFtZSArIFwiIFwiXHJcbiAgICAgIH1cclxuICAgIH0pXHJcblxyXG4gICAgbGV0IGhhdmVGbGFnID0gZmFsc2U7XHJcbiAgICBsZXQgaGF2ZVN0ciA9IFwiXCI7XHJcbiAgICB0aGlzLmRhdGEuY2x1ZUxpc3RbJ2hhdmUnXS5mb3JFYWNoKChjbHVlOiBhbnkpID0+IHtcclxuICAgICAgaWYgKGNsdWUuc2hvd0ZsYWcpIHtcclxuICAgICAgICBoYXZlRmxhZyA9IHRydWU7XHJcbiAgICAgICAgaGF2ZVN0ciArPSBjbHVlLm5hbWUgKyBcIiBcIlxyXG4gICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAgIGlmICghbmVlZEZsYWcpIHtcclxuICAgICAgd3guc2hvd1RvYXN0KHtcclxuICAgICAgICB0aXRsZTogXCLor7fpgInmi6noh7PlsJHkuIDkuKrpnIDopoHnmoTnur/ntKJcIixcclxuICAgICAgICBpY29uOiBcIm5vbmVcIixcclxuICAgICAgICBkdXJhdGlvbjogMjAwMFxyXG4gICAgICB9KVxyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAoIWhhdmVGbGFnKSB7XHJcbiAgICAgIHd4LnNob3dUb2FzdCh7XHJcbiAgICAgICAgdGl0bGU6IFwi6K+36YCJ5oup6Iez5bCR5LiA5Liq55So5p2l5Lqk5o2i55qE57q/57SiXCIsXHJcbiAgICAgICAgaWNvbjogXCJub25lXCIsXHJcbiAgICAgICAgZHVyYXRpb246IDIwMDBcclxuICAgICAgfSlcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgbGV0IHJlcSA9IHsgaWQ6IHRoaXMuZGF0YS5pZCwgc2VydmVyOiB0aGlzLmRhdGEuc2VydmVyLCByZW1hcms6IHRoaXMuZGF0YS5yZW1hcmssIGNsdWVMaXN0OiB0aGlzLmRhdGEuY2x1ZUxpc3QgfVxyXG4gICAgbGV0IHRoYXQgPSB0aGlzO1xyXG4gICAgbGV0IGNoYW5nZUNsdWVTdHIgPSB0aGlzLmRhdGEuaWQgKyBcIiBcIiArIHRoaXMuZGF0YS5zZXJ2ZXIgKyBcIiBcIiArIGhhdmVTdHIgKyBcIiDmjaIgXCIgKyBuZWVkU3RyO1xyXG4gICAgdGhhdC5zZXREYXRhISh7XHJcbiAgICAgIGxvYWRpbmc6IHRydWVcclxuICAgIH0pO1xyXG4gICAgYXBwLmZ1bmMucG9zdCgnL3Bvc3RDaGFuZ2UnLCByZXEsIGZ1bmN0aW9uIChyZXNwb25zZTogQXJrUmVzcCkge1xyXG4gICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XHJcblxyXG4gICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDApIHtcclxuICAgICAgICB3eC5zZXRTdG9yYWdlKHtcclxuICAgICAgICAgIGtleTogXCJjaGFuZ2VDbHVlXCIsXHJcbiAgICAgICAgICBkYXRhOiBjaGFuZ2VDbHVlU3RyXHJcbiAgICAgICAgfSlcclxuICAgICAgICB0aGF0LnNldERhdGEhKHtcclxuICAgICAgICAgIGxvYWRpbmc6IGZhbHNlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgd3guc2hvd1RvYXN0KHtcclxuICAgICAgICAgIHRpdGxlOiBcIuWPkeW4g+aIkOWKn1wiLFxyXG4gICAgICAgICAgaWNvbjogXCJub25lXCIsXHJcbiAgICAgICAgICBkdXJhdGlvbjogMjAwMFxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgd3gubmF2aWdhdGVCYWNrKHsgICAgIC8v6L+U5Zue5LiK5LiA6aG16Z2i5oiW5aSa57qn6aG16Z2iXHJcbiAgICAgICAgICBkZWx0YTogMVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgfVxyXG5cclxufSkiXX0=