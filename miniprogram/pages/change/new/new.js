"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var app = getApp();
Page({
    data: {
        id: "",
        server: "",
        serverIndex: null,
        serverList: ['官服', 'B服', '其他'],
        clueList: {
            "need": [{ name: "1", showFlag: false }, { name: "2", showFlag: false }, { name: "3", showFlag: false }, { name: "4", showFlag: false }, { name: "5", showFlag: false }, { name: "6", showFlag: false }, { name: "7", showFlag: false }],
            "have": [{ name: "1", showFlag: false }, { name: "2", showFlag: false }, { name: "3", showFlag: false }, { name: "4", showFlag: false }, { name: "5", showFlag: false }, { name: "6", showFlag: false }, { name: "7", showFlag: false }]
        },
        remark: "",
        loading: false
    },
    PickerChange(e) {
        console.log(e);
        let tmp = this.data.serverList[e.detail.value];
        this.setData({
            serverIndex: e.detail.value,
            server: tmp
        });
    },
    InputChange: function (e) {
        console.log(e.target.dataset.type);
        console.log(e.detail.value);
        let type = e.target.dataset.type;
        if (type === 'remark') {
            this.setData({
                remark: e.detail.value
            });
        }
        else if (type === 'id') {
            this.setData({
                id: e.detail.value
            });
        }
    },
    clickClue(e) {
        console.log(e);
        let type = e.target.dataset.type;
        let clue = e.target.dataset.title;
        let clueTmp = this.data.clueList[type][clue];
        clueTmp.showFlag = !clueTmp.showFlag;
        this.setData({
            clueList: this.data.clueList
        });
    },
    saveChange() {
        if (!this.data.id) {
            wx.showToast({
                title: "请输入游戏id",
                icon: "none",
                duration: 2000
            });
            return;
        }
        if (!this.data.server) {
            wx.showToast({
                title: "请选择游戏区服",
                icon: "none",
                duration: 2000
            });
            return;
        }
        let needFlag = false;
        let needStr = "";
        this.data.clueList['need'].forEach((clue) => {
            if (clue.showFlag) {
                needFlag = true;
                needStr += clue.name + " ";
            }
        });
        let haveFlag = false;
        let haveStr = "";
        this.data.clueList['have'].forEach((clue) => {
            if (clue.showFlag) {
                haveFlag = true;
                haveStr += clue.name + " ";
            }
        });
        if (!needFlag) {
            wx.showToast({
                title: "请选择至少一个需要的线索",
                icon: "none",
                duration: 2000
            });
            return;
        }
        if (!haveFlag) {
            wx.showToast({
                title: "请选择至少一个用来交换的线索",
                icon: "none",
                duration: 2000
            });
            return;
        }
        let req = { id: this.data.id, server: this.data.server, remark: this.data.remark, clueList: this.data.clueList };
        let that = this;
        let changeClueStr = this.data.id + " " + this.data.server + " " + haveStr + " 换 " + needStr;
        that.setData({
            loading: true
        });
        app.func.post('/postChange', req, function (response) {
            console.log(response);
            if (response.status === 200) {
                wx.setStorage({
                    key: "changeClue",
                    data: changeClueStr
                });
                that.setData({
                    loading: false
                });
                wx.showToast({
                    title: "发布成功",
                    icon: "none",
                    duration: 2000
                });
                wx.navigateBack({
                    delta: 1
                });
            }
        });
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmV3LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsibmV3LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQ0EsSUFBSSxHQUFHLEdBQUcsTUFBTSxFQUFFLENBQUE7QUFHbEIsSUFBSSxDQUFDO0lBQ0gsSUFBSSxFQUFFO1FBQ0osRUFBRSxFQUFFLEVBQUU7UUFDTixNQUFNLEVBQUUsRUFBRTtRQUNWLFdBQVcsRUFBRSxJQUFJO1FBQ2pCLFVBQVUsRUFBRSxDQUFDLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDO1FBQzlCLFFBQVEsRUFBRTtZQUNSLE1BQU0sRUFBRSxDQUFDLEVBQUUsSUFBSSxFQUFFLEdBQUcsRUFBRSxRQUFRLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsR0FBRyxFQUFFLFFBQVEsRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRSxHQUFHLEVBQUUsUUFBUSxFQUFFLEtBQUssRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLEdBQUcsRUFBRSxRQUFRLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsR0FBRyxFQUFFLFFBQVEsRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRSxHQUFHLEVBQUUsUUFBUSxFQUFFLEtBQUssRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLEdBQUcsRUFBRSxRQUFRLEVBQUUsS0FBSyxFQUFFLENBQUM7WUFDeE8sTUFBTSxFQUFFLENBQUMsRUFBRSxJQUFJLEVBQUUsR0FBRyxFQUFFLFFBQVEsRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRSxHQUFHLEVBQUUsUUFBUSxFQUFFLEtBQUssRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLEdBQUcsRUFBRSxRQUFRLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsR0FBRyxFQUFFLFFBQVEsRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRSxHQUFHLEVBQUUsUUFBUSxFQUFFLEtBQUssRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLEdBQUcsRUFBRSxRQUFRLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFBRSxJQUFJLEVBQUUsR0FBRyxFQUFFLFFBQVEsRUFBRSxLQUFLLEVBQUUsQ0FBQztTQUN6TztRQUNELE1BQU0sRUFBRSxFQUFFO1FBQ1YsT0FBTyxFQUFFLEtBQUs7S0FDZjtJQUtELFlBQVksQ0FBQyxDQUFNO1FBRWpCLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDZixJQUFJLEdBQUcsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQy9DLElBQUksQ0FBQyxPQUFRLENBQUM7WUFDWixXQUFXLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFLO1lBQzNCLE1BQU0sRUFBRSxHQUFHO1NBQ1osQ0FBQyxDQUFBO0lBQ0osQ0FBQztJQUVELFdBQVcsRUFBRSxVQUFVLENBQU07UUFDM0IsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUNuQyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUE7UUFDM0IsSUFBSSxJQUFJLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDO1FBQ2pDLElBQUksSUFBSSxLQUFLLFFBQVEsRUFBRTtZQUNyQixJQUFJLENBQUMsT0FBUSxDQUFDO2dCQUNaLE1BQU0sRUFBRSxDQUFDLENBQUMsTUFBTSxDQUFDLEtBQUs7YUFDdkIsQ0FBQyxDQUFBO1NBQ0g7YUFBTSxJQUFJLElBQUksS0FBSyxJQUFJLEVBQUU7WUFDeEIsSUFBSSxDQUFDLE9BQVEsQ0FBQztnQkFDWixFQUFFLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFLO2FBQ25CLENBQUMsQ0FBQTtTQUNIO0lBRUgsQ0FBQztJQUlELFNBQVMsQ0FBQyxDQUFNO1FBQ2QsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNmLElBQUksSUFBSSxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQztRQUNqQyxJQUFJLElBQUksR0FBRyxDQUFDLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUM7UUFFbEMsSUFBSSxPQUFPLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDN0MsT0FBTyxDQUFDLFFBQVEsR0FBRyxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUM7UUFDckMsSUFBSSxDQUFDLE9BQVEsQ0FBQztZQUNaLFFBQVEsRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVE7U0FDN0IsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUNELFVBQVU7UUFFUixJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLEVBQUU7WUFDakIsRUFBRSxDQUFDLFNBQVMsQ0FBQztnQkFDWCxLQUFLLEVBQUUsU0FBUztnQkFDaEIsSUFBSSxFQUFFLE1BQU07Z0JBQ1osUUFBUSxFQUFFLElBQUk7YUFDZixDQUFDLENBQUE7WUFDRixPQUFPO1NBQ1I7UUFDRCxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUU7WUFDckIsRUFBRSxDQUFDLFNBQVMsQ0FBQztnQkFDWCxLQUFLLEVBQUUsU0FBUztnQkFDaEIsSUFBSSxFQUFFLE1BQU07Z0JBQ1osUUFBUSxFQUFFLElBQUk7YUFDZixDQUFDLENBQUE7WUFDRixPQUFPO1NBQ1I7UUFHRCxJQUFJLFFBQVEsR0FBRyxLQUFLLENBQUM7UUFDckIsSUFBSSxPQUFPLEdBQUcsRUFBRSxDQUFDO1FBQ2pCLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQVMsRUFBRSxFQUFFO1lBQy9DLElBQUksSUFBSSxDQUFDLFFBQVEsRUFBRTtnQkFDakIsUUFBUSxHQUFHLElBQUksQ0FBQztnQkFDaEIsT0FBTyxJQUFJLElBQUksQ0FBQyxJQUFJLEdBQUcsR0FBRyxDQUFBO2FBQzNCO1FBQ0gsQ0FBQyxDQUFDLENBQUE7UUFFRixJQUFJLFFBQVEsR0FBRyxLQUFLLENBQUM7UUFDckIsSUFBSSxPQUFPLEdBQUcsRUFBRSxDQUFDO1FBQ2pCLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQVMsRUFBRSxFQUFFO1lBQy9DLElBQUksSUFBSSxDQUFDLFFBQVEsRUFBRTtnQkFDakIsUUFBUSxHQUFHLElBQUksQ0FBQztnQkFDaEIsT0FBTyxJQUFJLElBQUksQ0FBQyxJQUFJLEdBQUcsR0FBRyxDQUFBO2FBQzNCO1FBQ0gsQ0FBQyxDQUFDLENBQUE7UUFFRixJQUFJLENBQUMsUUFBUSxFQUFFO1lBQ2IsRUFBRSxDQUFDLFNBQVMsQ0FBQztnQkFDWCxLQUFLLEVBQUUsY0FBYztnQkFDckIsSUFBSSxFQUFFLE1BQU07Z0JBQ1osUUFBUSxFQUFFLElBQUk7YUFDZixDQUFDLENBQUE7WUFDRixPQUFPO1NBQ1I7UUFDRCxJQUFJLENBQUMsUUFBUSxFQUFFO1lBQ2IsRUFBRSxDQUFDLFNBQVMsQ0FBQztnQkFDWCxLQUFLLEVBQUUsZ0JBQWdCO2dCQUN2QixJQUFJLEVBQUUsTUFBTTtnQkFDWixRQUFRLEVBQUUsSUFBSTthQUNmLENBQUMsQ0FBQTtZQUNGLE9BQU87U0FDUjtRQUNELElBQUksR0FBRyxHQUFHLEVBQUUsRUFBRSxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxFQUFFLE1BQU0sRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxNQUFNLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsUUFBUSxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUE7UUFDaEgsSUFBSSxJQUFJLEdBQUcsSUFBSSxDQUFDO1FBQ2hCLElBQUksYUFBYSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxHQUFHLEdBQUcsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sR0FBRyxHQUFHLEdBQUcsT0FBTyxHQUFHLEtBQUssR0FBRyxPQUFPLENBQUM7UUFDNUYsSUFBSSxDQUFDLE9BQVEsQ0FBQztZQUNaLE9BQU8sRUFBRSxJQUFJO1NBQ2QsQ0FBQyxDQUFDO1FBQ0gsR0FBRyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsYUFBYSxFQUFFLEdBQUcsRUFBRSxVQUFVLFFBQWlCO1lBQzNELE9BQU8sQ0FBQyxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUM7WUFFdEIsSUFBSSxRQUFRLENBQUMsTUFBTSxLQUFLLEdBQUcsRUFBRTtnQkFDM0IsRUFBRSxDQUFDLFVBQVUsQ0FBQztvQkFDWixHQUFHLEVBQUUsWUFBWTtvQkFDakIsSUFBSSxFQUFFLGFBQWE7aUJBQ3BCLENBQUMsQ0FBQTtnQkFDRixJQUFJLENBQUMsT0FBUSxDQUFDO29CQUNaLE9BQU8sRUFBRSxLQUFLO2lCQUNmLENBQUMsQ0FBQztnQkFDSCxFQUFFLENBQUMsU0FBUyxDQUFDO29CQUNYLEtBQUssRUFBRSxNQUFNO29CQUNiLElBQUksRUFBRSxNQUFNO29CQUNaLFFBQVEsRUFBRSxJQUFJO2lCQUNmLENBQUMsQ0FBQTtnQkFDRixFQUFFLENBQUMsWUFBWSxDQUFDO29CQUNkLEtBQUssRUFBRSxDQUFDO2lCQUNULENBQUMsQ0FBQTthQUNIO1FBQ0gsQ0FBQyxDQUFDLENBQUE7SUFDSixDQUFDO0NBRUYsQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiLy8gcGFnZXMvY2hhbmdlL25ldy9uZXcuanNcclxudmFyIGFwcCA9IGdldEFwcCgpXHJcbi8vQHRzLWlnbm9yZVxyXG5pbXBvcnQgQXJrUmVzcCA9IHJlcXVpcmUoJy4uLy4uL21vZGVsL0Fya1Jlc3AuanMnKTtcclxuUGFnZSh7XHJcbiAgZGF0YToge1xyXG4gICAgaWQ6IFwiXCIsXHJcbiAgICBzZXJ2ZXI6IFwiXCIsXHJcbiAgICBzZXJ2ZXJJbmRleDogbnVsbCxcclxuICAgIHNlcnZlckxpc3Q6IFsn5a6Y5pyNJywgJ0LmnI0nLCAn5YW25LuWJ10sXHJcbiAgICBjbHVlTGlzdDoge1xyXG4gICAgICBcIm5lZWRcIjogW3sgbmFtZTogXCIxXCIsIHNob3dGbGFnOiBmYWxzZSB9LCB7IG5hbWU6IFwiMlwiLCBzaG93RmxhZzogZmFsc2UgfSwgeyBuYW1lOiBcIjNcIiwgc2hvd0ZsYWc6IGZhbHNlIH0sIHsgbmFtZTogXCI0XCIsIHNob3dGbGFnOiBmYWxzZSB9LCB7IG5hbWU6IFwiNVwiLCBzaG93RmxhZzogZmFsc2UgfSwgeyBuYW1lOiBcIjZcIiwgc2hvd0ZsYWc6IGZhbHNlIH0sIHsgbmFtZTogXCI3XCIsIHNob3dGbGFnOiBmYWxzZSB9XSxcclxuICAgICAgXCJoYXZlXCI6IFt7IG5hbWU6IFwiMVwiLCBzaG93RmxhZzogZmFsc2UgfSwgeyBuYW1lOiBcIjJcIiwgc2hvd0ZsYWc6IGZhbHNlIH0sIHsgbmFtZTogXCIzXCIsIHNob3dGbGFnOiBmYWxzZSB9LCB7IG5hbWU6IFwiNFwiLCBzaG93RmxhZzogZmFsc2UgfSwgeyBuYW1lOiBcIjVcIiwgc2hvd0ZsYWc6IGZhbHNlIH0sIHsgbmFtZTogXCI2XCIsIHNob3dGbGFnOiBmYWxzZSB9LCB7IG5hbWU6IFwiN1wiLCBzaG93RmxhZzogZmFsc2UgfV1cclxuICAgIH0sXHJcbiAgICByZW1hcms6IFwiXCIsXHJcbiAgICBsb2FkaW5nOiBmYWxzZVxyXG4gIH0sXHJcblxyXG5cclxuXHJcblxyXG4gIFBpY2tlckNoYW5nZShlOiBhbnkpIHtcclxuXHJcbiAgICBjb25zb2xlLmxvZyhlKTtcclxuICAgIGxldCB0bXAgPSB0aGlzLmRhdGEuc2VydmVyTGlzdFtlLmRldGFpbC52YWx1ZV07XHJcbiAgICB0aGlzLnNldERhdGEhKHtcclxuICAgICAgc2VydmVySW5kZXg6IGUuZGV0YWlsLnZhbHVlLFxyXG4gICAgICBzZXJ2ZXI6IHRtcFxyXG4gICAgfSlcclxuICB9LFxyXG5cclxuICBJbnB1dENoYW5nZTogZnVuY3Rpb24gKGU6IGFueSkge1xyXG4gICAgY29uc29sZS5sb2coZS50YXJnZXQuZGF0YXNldC50eXBlKTtcclxuICAgIGNvbnNvbGUubG9nKGUuZGV0YWlsLnZhbHVlKVxyXG4gICAgbGV0IHR5cGUgPSBlLnRhcmdldC5kYXRhc2V0LnR5cGU7XHJcbiAgICBpZiAodHlwZSA9PT0gJ3JlbWFyaycpIHtcclxuICAgICAgdGhpcy5zZXREYXRhISh7XHJcbiAgICAgICAgcmVtYXJrOiBlLmRldGFpbC52YWx1ZVxyXG4gICAgICB9KVxyXG4gICAgfSBlbHNlIGlmICh0eXBlID09PSAnaWQnKSB7XHJcbiAgICAgIHRoaXMuc2V0RGF0YSEoe1xyXG4gICAgICAgIGlkOiBlLmRldGFpbC52YWx1ZVxyXG4gICAgICB9KVxyXG4gICAgfVxyXG5cclxuICB9LFxyXG5cclxuXHJcblxyXG4gIGNsaWNrQ2x1ZShlOiBhbnkpIHtcclxuICAgIGNvbnNvbGUubG9nKGUpO1xyXG4gICAgbGV0IHR5cGUgPSBlLnRhcmdldC5kYXRhc2V0LnR5cGU7XHJcbiAgICBsZXQgY2x1ZSA9IGUudGFyZ2V0LmRhdGFzZXQudGl0bGU7XHJcbiAgICAvL0B0cy1pZ25vcmVcclxuICAgIGxldCBjbHVlVG1wID0gdGhpcy5kYXRhLmNsdWVMaXN0W3R5cGVdW2NsdWVdO1xyXG4gICAgY2x1ZVRtcC5zaG93RmxhZyA9ICFjbHVlVG1wLnNob3dGbGFnO1xyXG4gICAgdGhpcy5zZXREYXRhISh7XHJcbiAgICAgIGNsdWVMaXN0OiB0aGlzLmRhdGEuY2x1ZUxpc3RcclxuICAgIH0pO1xyXG4gIH0sXHJcbiAgc2F2ZUNoYW5nZSgpIHtcclxuICAgIC8v5Yik5pat56m6XHJcbiAgICBpZiAoIXRoaXMuZGF0YS5pZCkge1xyXG4gICAgICB3eC5zaG93VG9hc3Qoe1xyXG4gICAgICAgIHRpdGxlOiBcIuivt+i+k+WFpea4uOaIj2lkXCIsXHJcbiAgICAgICAgaWNvbjogXCJub25lXCIsXHJcbiAgICAgICAgZHVyYXRpb246IDIwMDBcclxuICAgICAgfSlcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKCF0aGlzLmRhdGEuc2VydmVyKSB7XHJcbiAgICAgIHd4LnNob3dUb2FzdCh7XHJcbiAgICAgICAgdGl0bGU6IFwi6K+36YCJ5oup5ri45oiP5Yy65pyNXCIsXHJcbiAgICAgICAgaWNvbjogXCJub25lXCIsXHJcbiAgICAgICAgZHVyYXRpb246IDIwMDBcclxuICAgICAgfSlcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBsZXQgbmVlZEZsYWcgPSBmYWxzZTtcclxuICAgIGxldCBuZWVkU3RyID0gXCJcIjtcclxuICAgIHRoaXMuZGF0YS5jbHVlTGlzdFsnbmVlZCddLmZvckVhY2goKGNsdWU6IGFueSkgPT4ge1xyXG4gICAgICBpZiAoY2x1ZS5zaG93RmxhZykge1xyXG4gICAgICAgIG5lZWRGbGFnID0gdHJ1ZTtcclxuICAgICAgICBuZWVkU3RyICs9IGNsdWUubmFtZSArIFwiIFwiXHJcbiAgICAgIH1cclxuICAgIH0pXHJcblxyXG4gICAgbGV0IGhhdmVGbGFnID0gZmFsc2U7XHJcbiAgICBsZXQgaGF2ZVN0ciA9IFwiXCI7XHJcbiAgICB0aGlzLmRhdGEuY2x1ZUxpc3RbJ2hhdmUnXS5mb3JFYWNoKChjbHVlOiBhbnkpID0+IHtcclxuICAgICAgaWYgKGNsdWUuc2hvd0ZsYWcpIHtcclxuICAgICAgICBoYXZlRmxhZyA9IHRydWU7XHJcbiAgICAgICAgaGF2ZVN0ciArPSBjbHVlLm5hbWUgKyBcIiBcIlxyXG4gICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAgIGlmICghbmVlZEZsYWcpIHtcclxuICAgICAgd3guc2hvd1RvYXN0KHtcclxuICAgICAgICB0aXRsZTogXCLor7fpgInmi6noh7PlsJHkuIDkuKrpnIDopoHnmoTnur/ntKJcIixcclxuICAgICAgICBpY29uOiBcIm5vbmVcIixcclxuICAgICAgICBkdXJhdGlvbjogMjAwMFxyXG4gICAgICB9KVxyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAoIWhhdmVGbGFnKSB7XHJcbiAgICAgIHd4LnNob3dUb2FzdCh7XHJcbiAgICAgICAgdGl0bGU6IFwi6K+36YCJ5oup6Iez5bCR5LiA5Liq55So5p2l5Lqk5o2i55qE57q/57SiXCIsXHJcbiAgICAgICAgaWNvbjogXCJub25lXCIsXHJcbiAgICAgICAgZHVyYXRpb246IDIwMDBcclxuICAgICAgfSlcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgbGV0IHJlcSA9IHsgaWQ6IHRoaXMuZGF0YS5pZCwgc2VydmVyOiB0aGlzLmRhdGEuc2VydmVyLCByZW1hcms6IHRoaXMuZGF0YS5yZW1hcmssIGNsdWVMaXN0OiB0aGlzLmRhdGEuY2x1ZUxpc3QgfVxyXG4gICAgbGV0IHRoYXQgPSB0aGlzO1xyXG4gICAgbGV0IGNoYW5nZUNsdWVTdHIgPSB0aGlzLmRhdGEuaWQgKyBcIiBcIiArIHRoaXMuZGF0YS5zZXJ2ZXIgKyBcIiBcIiArIGhhdmVTdHIgKyBcIiDmjaIgXCIgKyBuZWVkU3RyO1xyXG4gICAgdGhhdC5zZXREYXRhISh7XHJcbiAgICAgIGxvYWRpbmc6IHRydWVcclxuICAgIH0pO1xyXG4gICAgYXBwLmZ1bmMucG9zdCgnL3Bvc3RDaGFuZ2UnLCByZXEsIGZ1bmN0aW9uIChyZXNwb25zZTogQXJrUmVzcCkge1xyXG4gICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XHJcblxyXG4gICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDApIHtcclxuICAgICAgICB3eC5zZXRTdG9yYWdlKHtcclxuICAgICAgICAgIGtleTogXCJjaGFuZ2VDbHVlXCIsXHJcbiAgICAgICAgICBkYXRhOiBjaGFuZ2VDbHVlU3RyXHJcbiAgICAgICAgfSlcclxuICAgICAgICB0aGF0LnNldERhdGEhKHtcclxuICAgICAgICAgIGxvYWRpbmc6IGZhbHNlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgd3guc2hvd1RvYXN0KHtcclxuICAgICAgICAgIHRpdGxlOiBcIuWPkeW4g+aIkOWKn1wiLFxyXG4gICAgICAgICAgaWNvbjogXCJub25lXCIsXHJcbiAgICAgICAgICBkdXJhdGlvbjogMjAwMFxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgd3gubmF2aWdhdGVCYWNrKHsgICAgIC8v6L+U5Zue5LiK5LiA6aG16Z2i5oiW5aSa57qn6aG16Z2iXHJcbiAgICAgICAgICBkZWx0YTogMVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgfVxyXG5cclxufSkiXX0=