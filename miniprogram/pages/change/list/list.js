"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var app = getApp();
Component({
    options: {
        addGlobalClass: true,
    },
    data: {
        changeList: [],
        CustomBar: app.globalData.CustomBar,
        keyword: '',
        pageIndex: 1,
        pageSize: 10
    },
    methods: {
        getTimeAgo: function (dateTimeStamp) {
            let result = "";
            var minute = 1000 * 60;
            var hour = minute * 60;
            var day = hour * 24;
            var week = day * 7;
            var halfamonth = day * 15;
            var month = day * 30;
            var now = new Date().getTime();
            console.log(now);
            var diffValue = now - dateTimeStamp;
            if (diffValue < 0) {
                return;
            }
            var minC = diffValue / minute;
            var hourC = diffValue / hour;
            var dayC = diffValue / day;
            var weekC = diffValue / week;
            var monthC = diffValue / month;
            if (monthC >= 1 && monthC <= 3) {
                result = " " + parseInt(monthC) + "月前";
            }
            else if (weekC >= 1 && weekC <= 3) {
                result = " " + parseInt(weekC) + "周前";
            }
            else if (dayC >= 1 && dayC <= 6) {
                result = " " + parseInt(dayC) + "天前";
            }
            else if (hourC >= 1 && hourC <= 23) {
                result = " " + parseInt(hourC) + "小时前";
            }
            else if (minC >= 1 && minC <= 59) {
                result = " " + parseInt(minC) + "分钟前";
            }
            else if (diffValue >= 0 && diffValue <= minute) {
                result = "刚刚";
            }
            else {
                var datetime = new Date();
                datetime.setTime(dateTimeStamp);
                var Nyear = datetime.getFullYear();
                var Nmonth = datetime.getMonth() + 1 < 10 ? "0" + (datetime.getMonth() + 1) : datetime.getMonth() + 1;
                var Ndate = datetime.getDate() < 10 ? "0" + datetime.getDate() : datetime.getDate();
                var Nhour = datetime.getHours() < 10 ? "0" + datetime.getHours() : datetime.getHours();
                var Nminute = datetime.getMinutes() < 10 ? "0" + datetime.getMinutes() : datetime.getMinutes();
                var Nsecond = datetime.getSeconds() < 10 ? "0" + datetime.getSeconds() : datetime.getSeconds();
                result = Nyear + "-" + Nmonth + "-" + Ndate;
            }
            return result;
        },
        search: function () {
            this.setData({ pageIndex: 1 });
            this.getList();
        },
        getList: function () {
            let that = this;
            app.func.post('/changeList', { pageIndex: this.data.pageIndex, pageSize: this.data.pageSize, keyword: this.data.keyword }, function (response) {
                if (response.status === 200) {
                    let list = response.data;
                    list.forEach((item) => {
                        item.createdtime = that.getTimeAgo(new Date(item.CreatedAt).getTime());
                    });
                    that.setData({ changeList: list });
                    wx.pageScrollTo({
                        scrollTop: 0,
                        duration: 150
                    });
                }
            });
        },
        keywordInput: function (e) {
            let keyword = e.detail.value;
            this.setData({ keyword: keyword });
        },
        nextPage: function () {
            let page = this.data.pageIndex + 1;
            this.setData({ pageIndex: page });
            this.getList();
        },
        lastPage: function () {
            let page = this.data.pageIndex;
            this.setData({ pageIndex: page-- });
            this.getList();
        },
        copyBtn: function (e) {
            wx.setClipboardData({
                data: e.target.dataset.name,
                success: function () {
                    wx.showToast({
                        title: '复制成功',
                    });
                }
            });
        }
    },
    lifetimes: {
        attached: function () {
            this.getList();
        },
        ready: function () {
        },
        moved: function () {
        },
        detached: function () {
        },
    },
    pageLifetimes: {
        show: function () {
            this.getList();
        },
        hide: function () {
            console.log('Component-1 pageLifetimes >> Hide');
        }
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGlzdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImxpc3QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFDQSxJQUFJLEdBQUcsR0FBRyxNQUFNLEVBQUUsQ0FBQTtBQUdsQixTQUFTLENBQUM7SUFDUixPQUFPLEVBQUU7UUFDUCxjQUFjLEVBQUUsSUFBSTtLQUNyQjtJQUNELElBQUksRUFBRTtRQUNKLFVBQVUsRUFBRSxFQUFFO1FBQ2QsU0FBUyxFQUFFLEdBQUcsQ0FBQyxVQUFVLENBQUMsU0FBUztRQUNuQyxPQUFPLEVBQUUsRUFBRTtRQUNYLFNBQVMsRUFBRSxDQUFDO1FBQ1osUUFBUSxFQUFFLEVBQUU7S0FDYjtJQUlELE9BQU8sRUFBRTtRQUNQLFVBQVUsRUFBRSxVQUFVLGFBQXFCO1lBQ3pDLElBQUksTUFBTSxHQUFHLEVBQUUsQ0FBQztZQUNoQixJQUFJLE1BQU0sR0FBRyxJQUFJLEdBQUcsRUFBRSxDQUFDO1lBQ3ZCLElBQUksSUFBSSxHQUFHLE1BQU0sR0FBRyxFQUFFLENBQUM7WUFDdkIsSUFBSSxHQUFHLEdBQUcsSUFBSSxHQUFHLEVBQUUsQ0FBQztZQUNwQixJQUFJLElBQUksR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDO1lBQ25CLElBQUksVUFBVSxHQUFHLEdBQUcsR0FBRyxFQUFFLENBQUM7WUFDMUIsSUFBSSxLQUFLLEdBQUcsR0FBRyxHQUFHLEVBQUUsQ0FBQztZQUNyQixJQUFJLEdBQUcsR0FBRyxJQUFJLElBQUksRUFBRSxDQUFDLE9BQU8sRUFBRSxDQUFDO1lBQy9CLE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUE7WUFDaEIsSUFBSSxTQUFTLEdBQUcsR0FBRyxHQUFHLGFBQWEsQ0FBQztZQUVwQyxJQUFJLFNBQVMsR0FBRyxDQUFDLEVBQUU7Z0JBQ2pCLE9BQU87YUFDUjtZQUNELElBQUksSUFBSSxHQUFHLFNBQVMsR0FBRyxNQUFNLENBQUM7WUFFOUIsSUFBSSxLQUFLLEdBQUcsU0FBUyxHQUFH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QUEiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBwYWdlcy9jaGFuZ2UvbGlzdC9saXN0LmpzXHJcbnZhciBhcHAgPSBnZXRBcHAoKVxyXG4vL0B0cy1pZ25vcmVcclxuaW1wb3J0IEFya1Jlc3AgPSByZXF1aXJlKCcuLi8uLi9tb2RlbC9BcmtSZXNwLmpzJyk7XHJcbkNvbXBvbmVudCh7XHJcbiAgb3B0aW9uczoge1xyXG4gICAgYWRkR2xvYmFsQ2xhc3M6IHRydWUsXHJcbiAgfSxcclxuICBkYXRhOiB7XHJcbiAgICBjaGFuZ2VMaXN0OiBbXSxcclxuICAgIEN1c3RvbUJhcjogYXBwLmdsb2JhbERhdGEuQ3VzdG9tQmFyLFxyXG4gICAga2V5d29yZDogJycsXHJcbiAgICBwYWdlSW5kZXg6IDEsXHJcbiAgICBwYWdlU2l6ZTogMTBcclxuICB9LFxyXG5cclxuXHJcblxyXG4gIG1ldGhvZHM6IHtcclxuICAgIGdldFRpbWVBZ286IGZ1bmN0aW9uIChkYXRlVGltZVN0YW1wOiBudW1iZXIpIHsgICAvL2RhdGVUaW1lU3RhbXDmmK/kuIDkuKrml7bpl7Tmr6vnp5LvvIzms6jmhI/ml7bpl7TmiLPmmK/np5LnmoTlvaLlvI/vvIzlnKjov5nkuKrmr6vnp5LnmoTln7rnoYDkuIrpmaTku6UxMDAw77yM5bCx5piv5Y2B5L2N5pWw55qE5pe26Ze05oiz44CCMTPkvY3mlbDnmoTpg73mmK/ml7bpl7Tmr6vnp5LjgIJcclxuICAgICAgbGV0IHJlc3VsdCA9IFwiXCI7XHJcbiAgICAgIHZhciBtaW51dGUgPSAxMDAwICogNjA7ICAgICAgLy/miorliIbvvIzml7bvvIzlpKnvvIzlkajvvIzljYrkuKrmnIjvvIzkuIDkuKrmnIjnlKjmr6vnp5LooajnpLpcclxuICAgICAgdmFyIGhvdXIgPSBtaW51dGUgKiA2MDtcclxuICAgICAgdmFyIGRheSA9IGhvdXIgKiAyNDtcclxuICAgICAgdmFyIHdlZWsgPSBkYXkgKiA3O1xyXG4gICAgICB2YXIgaGFsZmFtb250aCA9IGRheSAqIDE1O1xyXG4gICAgICB2YXIgbW9udGggPSBkYXkgKiAzMDtcclxuICAgICAgdmFyIG5vdyA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOyAgIC8v6I635Y+W5b2T5YmN5pe26Ze05q+r56eSXHJcbiAgICAgIGNvbnNvbGUubG9nKG5vdylcclxuICAgICAgdmFyIGRpZmZWYWx1ZSA9IG5vdyAtIGRhdGVUaW1lU3RhbXA7Ly/ml7bpl7Tlt65cclxuXHJcbiAgICAgIGlmIChkaWZmVmFsdWUgPCAwKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIHZhciBtaW5DID0gZGlmZlZhbHVlIC8gbWludXRlO1xyXG4gICAgICAvL+iuoeeul+aXtumXtOW3rueahOWIhu+8jOaXtu+8jOWkqe+8jOWRqO+8jOaciFxyXG4gICAgICB2YXIgaG91ckMgPSBkaWZmVmFsdWUgLyBob3VyO1xyXG4gICAgICB2YXIgZGF5QyA9IGRpZmZWYWx1ZSAvIGRheTtcclxuICAgICAgdmFyIHdlZWtDID0gZGlmZlZhbHVlIC8gd2VlaztcclxuICAgICAgdmFyIG1vbnRoQyA9IGRpZmZWYWx1ZSAvIG1vbnRoO1xyXG4gICAgICBpZiAobW9udGhDID49IDEgJiYgbW9udGhDIDw9IDMpIHtcclxuICAgICAgICByZXN1bHQgPSBcIiBcIiArIHBhcnNlSW50KG1vbnRoQykgKyBcIuaciOWJjVwiXHJcbiAgICAgIH0gZWxzZSBpZiAod2Vla0MgPj0gMSAmJiB3ZWVrQyA8PSAzKSB7XHJcbiAgICAgICAgcmVzdWx0ID0gXCIgXCIgKyBwYXJzZUludCh3ZWVrQykgKyBcIuWRqOWJjVwiXHJcbiAgICAgIH0gZWxzZSBpZiAoZGF5QyA+PSAxICYmIGRheUMgPD0gNikge1xyXG4gICAgICAgIHJlc3VsdCA9IFwiIFwiICsgcGFyc2VJbnQoZGF5QykgKyBcIuWkqeWJjVwiXHJcbiAgICAgIH0gZWxzZSBpZiAoaG91ckMgPj0gMSAmJiBob3VyQyA8PSAyMykge1xyXG4gICAgICAgIHJlc3VsdCA9IFwiIFwiICsgcGFyc2VJbnQoaG91ckMpICsgXCLlsI/ml7bliY1cIlxyXG4gICAgICB9IGVsc2UgaWYgKG1pbkMgPj0gMSAmJiBtaW5DIDw9IDU5KSB7XHJcbiAgICAgICAgcmVzdWx0ID0gXCIgXCIgKyBwYXJzZUludChtaW5DKSArIFwi5YiG6ZKf5YmNXCJcclxuICAgICAgfSBlbHNlIGlmIChkaWZmVmFsdWUgPj0gMCAmJiBkaWZmVmFsdWUgPD0gbWludXRlKSB7XHJcbiAgICAgICAgcmVzdWx0ID0gXCLliJrliJpcIlxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHZhciBkYXRldGltZSA9IG5ldyBEYXRlKCk7XHJcbiAgICAgICAgZGF0ZXRpbWUuc2V0VGltZShkYXRlVGltZVN0YW1wKTtcclxuICAgICAgICB2YXIgTnllYXIgPSBkYXRldGltZS5nZXRGdWxsWWVhcigpO1xyXG4gICAgICAgIHZhciBObW9udGggPSBkYXRldGltZS5nZXRNb250aCgpICsgMSA8IDEwID8gXCIwXCIgKyAoZGF0ZXRpbWUuZ2V0TW9udGgoKSArIDEpIDogZGF0ZXRpbWUuZ2V0TW9udGgoKSArIDE7XHJcbiAgICAgICAgdmFyIE5kYXRlID0gZGF0ZXRpbWUuZ2V0RGF0ZSgpIDwgMTAgPyBcIjBcIiArIGRhdGV0aW1lLmdldERhdGUoKSA6IGRhdGV0aW1lLmdldERhdGUoKTtcclxuICAgICAgICB2YXIgTmhvdXIgPSBkYXRldGltZS5nZXRIb3VycygpIDwgMTAgPyBcIjBcIiArIGRhdGV0aW1lLmdldEhvdXJzKCkgOiBkYXRldGltZS5nZXRIb3VycygpO1xyXG4gICAgICAgIHZhciBObWludXRlID0gZGF0ZXRpbWUuZ2V0TWludXRlcygpIDwgMTAgPyBcIjBcIiArIGRhdGV0aW1lLmdldE1pbnV0ZXMoKSA6IGRhdGV0aW1lLmdldE1pbnV0ZXMoKTtcclxuICAgICAgICB2YXIgTnNlY29uZCA9IGRhdGV0aW1lLmdldFNlY29uZHMoKSA8IDEwID8gXCIwXCIgKyBkYXRldGltZS5nZXRTZWNvbmRzKCkgOiBkYXRldGltZS5nZXRTZWNvbmRzKCk7XHJcbiAgICAgICAgcmVzdWx0ID0gTnllYXIgKyBcIi1cIiArIE5tb250aCArIFwiLVwiICsgTmRhdGVcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfSxcclxuICAgIHNlYXJjaDogZnVuY3Rpb24gKCkge1xyXG4gICAgICB0aGlzLnNldERhdGEhKHsgcGFnZUluZGV4OiAxIH0pO1xyXG4gICAgICB0aGlzLmdldExpc3QoKTtcclxuICAgIH0sXHJcbiAgICBnZXRMaXN0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIGxldCB0aGF0ID0gdGhpcztcclxuICAgICAgYXBwLmZ1bmMucG9zdCgnL2NoYW5nZUxpc3QnLCB7IHBhZ2VJbmRleDogdGhpcy5kYXRhLnBhZ2VJbmRleCwgcGFnZVNpemU6IHRoaXMuZGF0YS5wYWdlU2l6ZSwga2V5d29yZDogdGhpcy5kYXRhLmtleXdvcmQgfSwgZnVuY3Rpb24gKHJlc3BvbnNlOiBBcmtSZXNwKSB7XHJcbiAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwKSB7XHJcblxyXG4gICAgICAgICAgbGV0IGxpc3QgPSByZXNwb25zZS5kYXRhO1xyXG5cclxuICAgICAgICAgIGxpc3QuZm9yRWFjaCgoaXRlbTogYW55KSA9PiB7XHJcbiAgICAgICAgICAgIGl0ZW0uY3JlYXRlZHRpbWUgPSB0aGF0LmdldFRpbWVBZ28obmV3IERhdGUoaXRlbS5DcmVhdGVkQXQpLmdldFRpbWUoKSk7XHJcbiAgICAgICAgICB9KVxyXG5cclxuXHJcbiAgICAgICAgICB0aGF0LnNldERhdGEhKHsgY2hhbmdlTGlzdDogbGlzdCB9KTtcclxuICAgICAgICAgIHd4LnBhZ2VTY3JvbGxUbyh7XHJcbiAgICAgICAgICAgIHNjcm9sbFRvcDogMCxcclxuICAgICAgICAgICAgZHVyYXRpb246IDE1MFxyXG4gICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICB9LFxyXG4gICAga2V5d29yZElucHV0OiBmdW5jdGlvbiAoZTogYW55KSB7XHJcbiAgICAgIGxldCBrZXl3b3JkID0gZS5kZXRhaWwudmFsdWU7XHJcbiAgICAgIHRoaXMuc2V0RGF0YSEoeyBrZXl3b3JkOiBrZXl3b3JkIH0pO1xyXG4gICAgfSxcclxuICAgIG5leHRQYWdlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIGxldCBwYWdlID0gdGhpcy5kYXRhLnBhZ2VJbmRleCArIDE7XHJcbiAgICAgIHRoaXMuc2V0RGF0YSEoeyBwYWdlSW5kZXg6IHBhZ2UgfSk7XHJcbiAgICAgIHRoaXMuZ2V0TGlzdCgpO1xyXG4gICAgfSxcclxuICAgIGxhc3RQYWdlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIGxldCBwYWdlID0gdGhpcy5kYXRhLnBhZ2VJbmRleDtcclxuICAgICAgdGhpcy5zZXREYXRhISh7IHBhZ2VJbmRleDogcGFnZS0tIH0pO1xyXG4gICAgICB0aGlzLmdldExpc3QoKTtcclxuICAgIH0sXHJcbiAgICAvLyDkuIDplK7lpI3liLbkuovku7ZcclxuICAgIGNvcHlCdG46IGZ1bmN0aW9uIChlOiBhbnkpIHtcclxuICAgICAgd3guc2V0Q2xpcGJvYXJkRGF0YSh7XHJcbiAgICAgICAgLy/lh4blpIflpI3liLbnmoTmlbDmja5cclxuICAgICAgICBkYXRhOiBlLnRhcmdldC5kYXRhc2V0Lm5hbWUsXHJcbiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgd3guc2hvd1RvYXN0KHtcclxuICAgICAgICAgICAgdGl0bGU6ICflpI3liLbmiJDlip8nLFxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuICB9LFxyXG4gIGxpZmV0aW1lczoge1xyXG4gICAgLy8g55Sf5ZG95ZGo5pyf5Ye95pWw77yM5Y+v5Lul5Li65Ye95pWw77yM5oiW5LiA5Liq5ZyobWV0aG9kc+auteS4reWumuS5ieeahOaWueazleWQjVxyXG4gICAgYXR0YWNoZWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgdGhpcy5nZXRMaXN0KCk7XHJcbiAgICB9LFxyXG4gICAgcmVhZHk6IGZ1bmN0aW9uICgpIHtcclxuICAgIH0sXHJcbiAgICBtb3ZlZDogZnVuY3Rpb24gKCkge1xyXG4gICAgfSxcclxuICAgIGRldGFjaGVkOiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgfSxcclxuXHJcbiAgfSxcclxuICBwYWdlTGlmZXRpbWVzOiB7XHJcbiAgICAvLyDnu4Tku7bmiYDlnKjpobXpnaLnmoTnlJ/lkb3lkajmnJ/lo7DmmI7lr7nosaHvvIznm67liY3ku4XmlK/mjIHpobXpnaLnmoRzaG935ZKMaGlkZeS4pOS4queUn+WRveWRqOacn1xyXG4gICAgc2hvdzogZnVuY3Rpb24gKCkge1xyXG4gICAgICB0aGlzLmdldExpc3QoKTtcclxuICAgIH0sXHJcbiAgICBoaWRlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdDb21wb25lbnQtMSBwYWdlTGlmZXRpbWVzID4+IEhpZGUnKTtcclxuICAgIH1cclxuICB9XHJcbn0pIl19