"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var app = getApp();
Component({
    options: {
        addGlobalClass: true,
    },
    data: {
        changeList: [],
        CustomBar: app.globalData.CustomBar,
        keyword: '',
        pageIndex: 1,
        pageSize: 10
    },
    methods: {
        getTimeAgo: function (dateTimeStamp) {
            let result = "";
            var minute = 1000 * 60;
            var hour = minute * 60;
            var day = hour * 24;
            var week = day * 7;
            var month = day * 30;
            var now = new Date().getTime();
            console.log(now);
            var diffValue = now - dateTimeStamp;
            if (diffValue < 0) {
                return;
            }
            var minC = diffValue / minute;
            var hourC = diffValue / hour;
            var dayC = diffValue / day;
            var weekC = diffValue / week;
            var monthC = diffValue / month;
            if (monthC >= 1 && monthC <= 3) {
                result = " " + parseInt(monthC.toString()) + "月前";
            }
            else if (weekC >= 1 && weekC <= 3) {
                result = " " + parseInt(weekC.toString()) + "周前";
            }
            else if (dayC >= 1 && dayC <= 6) {
                result = " " + parseInt(dayC.toString()) + "天前";
            }
            else if (hourC >= 1 && hourC <= 23) {
                result = " " + parseInt(hourC.toString()) + "小时前";
            }
            else if (minC >= 1 && minC <= 59) {
                result = " " + parseInt(minC.toString()) + "分钟前";
            }
            else if (diffValue >= 0 && diffValue <= minute) {
                result = "刚刚";
            }
            else {
                var datetime = new Date();
                datetime.setTime(dateTimeStamp);
                var Nyear = datetime.getFullYear();
                var Nmonth = datetime.getMonth() + 1 < 10 ? "0" + (datetime.getMonth() + 1) : datetime.getMonth() + 1;
                var Ndate = datetime.getDate() < 10 ? "0" + datetime.getDate() : datetime.getDate();
                result = Nyear + "-" + Nmonth + "-" + Ndate;
            }
            return result;
        },
        search: function () {
            this.setData({ pageIndex: 1 });
            this.getList();
        },
        getList: function () {
            let that = this;
            app.func.post('/changeList', { pageIndex: this.data.pageIndex, pageSize: this.data.pageSize, keyword: this.data.keyword }, function (response) {
                if (response.status === 200) {
                    let list = response.data;
                    list.forEach((item) => {
                        item.createdtime = that.getTimeAgo(new Date(item.CreatedAt).getTime());
                    });
                    that.setData({ changeList: list });
                    wx.pageScrollTo({
                        scrollTop: 0,
                        duration: 150
                    });
                }
            });
        },
        keywordInput: function (e) {
            let keyword = e.detail.value;
            this.setData({ keyword: keyword });
        },
        nextPage: function () {
            let page = this.data.pageIndex + 1;
            this.setData({ pageIndex: page });
            this.getList();
        },
        lastPage: function () {
            let page = this.data.pageIndex;
            this.setData({ pageIndex: page-- });
            this.getList();
        },
        copyBtn: function (e) {
            wx.setClipboardData({
                data: e.target.dataset.name,
                success: function () {
                    wx.showToast({
                        title: '复制成功',
                    });
                }
            });
        }
    },
    lifetimes: {
        attached: function () {
            this.getList();
        },
        ready: function () {
        },
        moved: function () {
        },
        detached: function () {
        },
    },
    pageLifetimes: {
        show: function () {
            this.getList();
        },
        hide: function () {
            console.log('Component-1 pageLifetimes >> Hide');
        }
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGlzdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImxpc3QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFDQSxJQUFJLEdBQUcsR0FBRyxNQUFNLEVBQUUsQ0FBQTtBQUdsQixTQUFTLENBQUM7SUFDUixPQUFPLEVBQUU7UUFDUCxjQUFjLEVBQUUsSUFBSTtLQUNyQjtJQUNELElBQUksRUFBRTtRQUNKLFVBQVUsRUFBRSxFQUFFO1FBQ2QsU0FBUyxFQUFFLEdBQUcsQ0FBQyxVQUFVLENBQUMsU0FBUztRQUNuQyxPQUFPLEVBQUUsRUFBRTtRQUNYLFNBQVMsRUFBRSxDQUFDO1FBQ1osUUFBUSxFQUFFLEVBQUU7S0FDYjtJQUlELE9BQU8sRUFBRTtRQUNQLFVBQVUsRUFBRSxVQUFVLGFBQXFCO1lBQ3pDLElBQUksTUFBTSxHQUFHLEVBQUUsQ0FBQztZQUNoQixJQUFJLE1BQU0sR0FBRyxJQUFJLEdBQUcsRUFBRSxDQUFDO1lBQ3ZCLElBQUksSUFBSSxHQUFHLE1BQU0sR0FBRyxFQUFFLENBQUM7WUFDdkIsSUFBSSxHQUFHLEdBQUcsSUFBSSxHQUFHLEVBQUUsQ0FBQztZQUNwQixJQUFJLElBQUksR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDO1lBRW5CLElBQUksS0FBSyxHQUFHLEdBQUcsR0FBRyxFQUFFLENBQUM7WUFDckIsSUFBSSxHQUFHLEdBQUcsSUFBSSxJQUFJLEVBQUUsQ0FBQyxPQUFPLEVBQUUsQ0FBQztZQUMvQixPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFBO1lBQ2hCLElBQUksU0FBUyxHQUFHLEdBQUcsR0FBRyxhQUFhLENBQUM7WUFFcEMsSUFBSSxTQUFTLEdBQUcsQ0FBQyxFQUFFO2dCQUNqQixPQUFPO2FBQ1I7WUFDRCxJQUFJLElBQUksR0FBRyxTQUFTLEdBQUcsTUFBTSxDQUFDO1lBRTlCLElBQUksS0FBSyxHQUFHLFNBQVMsR0FBRyxJQUFJLENBQUM7WUFDN0IsSUFBSSxJQUFJLEdBQUcsU0FBUyxHQUFH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RUFBRSxVQUFVLENBQU07WUFDdkIsRUFBRSxDQUFDLGdCQUFnQixDQUFDO2dCQUVsQixJQUFJLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsSUFBSTtnQkFDM0IsT0FBTyxFQUFFO29CQUNQLEVBQUUsQ0FBQyxTQUFTLENBQUM7d0JBQ1gsS0FBSyxFQUFFLE1BQU07cUJBQ2QsQ0FBQyxDQUFDO2dCQUNMLENBQUM7YUFDRixDQUFDLENBQUM7UUFDTCxDQUFDO0tBQ0Y7SUFDRCxTQUFTLEVBQUU7UUFFVCxRQUFRLEVBQUU7WUFDUixJQUFJLENBQUMsT0FBTyxFQUFFLENBQUM7UUFDakIsQ0FBQztRQUNELEtBQUssRUFBRTtRQUNQLENBQUM7UUFDRCxLQUFLLEVBQUU7UUFDUCxDQUFDO1FBQ0QsUUFBUSxFQUFFO1FBRVYsQ0FBQztLQUVGO0lBQ0QsYUFBYSxFQUFFO1FBRWIsSUFBSSxFQUFFO1lBQ0osSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBQ2pCLENBQUM7UUFDRCxJQUFJLEVBQUU7WUFDSixPQUFPLENBQUMsR0FBRyxDQUFDLG1DQUFtQyxDQUFDLENBQUM7UUFDbkQsQ0FBQztLQUNGO0NBQ0YsQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiLy8gcGFnZXMvY2hhbmdlL2xpc3QvbGlzdC5qc1xyXG52YXIgYXBwID0gZ2V0QXBwKClcclxuLy9AdHMtaWdub3JlXHJcbmltcG9ydCBBcmtSZXNwID0gcmVxdWlyZSgnLi4vLi4vbW9kZWwvQXJrUmVzcC5qcycpO1xyXG5Db21wb25lbnQoe1xyXG4gIG9wdGlvbnM6IHtcclxuICAgIGFkZEdsb2JhbENsYXNzOiB0cnVlLFxyXG4gIH0sXHJcbiAgZGF0YToge1xyXG4gICAgY2hhbmdlTGlzdDogW10sXHJcbiAgICBDdXN0b21CYXI6IGFwcC5nbG9iYWxEYXRhLkN1c3RvbUJhcixcclxuICAgIGtleXdvcmQ6ICcnLFxyXG4gICAgcGFnZUluZGV4OiAxLFxyXG4gICAgcGFnZVNpemU6IDEwXHJcbiAgfSxcclxuXHJcblxyXG5cclxuICBtZXRob2RzOiB7XHJcbiAgICBnZXRUaW1lQWdvOiBmdW5jdGlvbiAoZGF0ZVRpbWVTdGFtcDogbnVtYmVyKSB7ICAgLy9kYXRlVGltZVN0YW1w5piv5LiA5Liq5pe26Ze05q+r56eS77yM5rOo5oSP5pe26Ze05oiz5piv56eS55qE5b2i5byP77yM5Zyo6L+Z5Liq5q+r56eS55qE5Z+656GA5LiK6Zmk5LulMTAwMO+8jOWwseaYr+WNgeS9jeaVsOeahOaXtumXtOaIs+OAgjEz5L2N5pWw55qE6YO95piv5pe26Ze05q+r56eS44CCXHJcbiAgICAgIGxldCByZXN1bHQgPSBcIlwiO1xyXG4gICAgICB2YXIgbWludXRlID0gMTAwMCAqIDYwOyAgICAgIC8v5oqK5YiG77yM5pe277yM5aSp77yM5ZGo77yM5Y2K5Liq5pyI77yM5LiA5Liq5pyI55So5q+r56eS6KGo56S6XHJcbiAgICAgIHZhciBob3VyID0gbWludXRlICogNjA7XHJcbiAgICAgIHZhciBkYXkgPSBob3VyICogMjQ7XHJcbiAgICAgIHZhciB3ZWVrID0gZGF5ICogNztcclxuICAgICAgLy92YXIgaGFsZmFtb250aCA9IGRheSAqIDE1O1xyXG4gICAgICB2YXIgbW9udGggPSBkYXkgKiAzMDtcclxuICAgICAgdmFyIG5vdyA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOyAgIC8v6I635Y+W5b2T5YmN5pe26Ze05q+r56eSXHJcbiAgICAgIGNvbnNvbGUubG9nKG5vdylcclxuICAgICAgdmFyIGRpZmZWYWx1ZSA9IG5vdyAtIGRhdGVUaW1lU3RhbXA7Ly/ml7bpl7Tlt65cclxuXHJcbiAgICAgIGlmIChkaWZmVmFsdWUgPCAwKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIHZhciBtaW5DID0gZGlmZlZhbHVlIC8gbWludXRlO1xyXG4gICAgICAvL+iuoeeul+aXtumXtOW3rueahOWIhu+8jOaXtu+8jOWkqe+8jOWRqO+8jOaciFxyXG4gICAgICB2YXIgaG91ckMgPSBkaWZmVmFsdWUgLyBob3VyO1xyXG4gICAgICB2YXIgZGF5QyA9IGRpZmZWYWx1ZSAvIGRheTtcclxuICAgICAgdmFyIHdlZWtDID0gZGlmZlZhbHVlIC8gd2VlaztcclxuICAgICAgdmFyIG1vbnRoQyA9IGRpZmZWYWx1ZSAvIG1vbnRoO1xyXG4gICAgICBpZiAobW9udGhDID49IDEgJiYgbW9udGhDIDw9IDMpIHtcclxuICAgICAgICByZXN1bHQgPSBcIiBcIiArIHBhcnNlSW50KG1vbnRoQy50b1N0cmluZygpKSArIFwi5pyI5YmNXCJcclxuICAgICAgfSBlbHNlIGlmICh3ZWVrQyA+PSAxICYmIHdlZWtDIDw9IDMpIHtcclxuICAgICAgICByZXN1bHQgPSBcIiBcIiArIHBhcnNlSW50KHdlZWtDLnRvU3RyaW5nKCkpICsgXCLlkajliY1cIlxyXG4gICAgICB9IGVsc2UgaWYgKGRheUMgPj0gMSAmJiBkYXlDIDw9IDYpIHtcclxuICAgICAgICByZXN1bHQgPSBcIiBcIiArIHBhcnNlSW50KGRheUMudG9TdHJpbmcoKSkgKyBcIuWkqeWJjVwiXHJcbiAgICAgIH0gZWxzZSBpZiAoaG91ckMgPj0gMSAmJiBob3VyQyA8PSAyMykge1xyXG4gICAgICAgIHJlc3VsdCA9IFwiIFwiICsgcGFyc2VJbnQoaG91ckMudG9TdHJpbmcoKSkgKyBcIuWwj+aXtuWJjVwiXHJcbiAgICAgIH0gZWxzZSBpZiAobWluQyA+PSAxICYmIG1pbkMgPD0gNTkpIHtcclxuICAgICAgICByZXN1bHQgPSBcIiBcIiArIHBhcnNlSW50KG1pbkMudG9TdHJpbmcoKSkgKyBcIuWIhumSn+WJjVwiXHJcbiAgICAgIH0gZWxzZSBpZiAoZGlmZlZhbHVlID49IDAgJiYgZGlmZlZhbHVlIDw9IG1pbnV0ZSkge1xyXG4gICAgICAgIHJlc3VsdCA9IFwi5Yia5YiaXCJcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB2YXIgZGF0ZXRpbWUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgIGRhdGV0aW1lLnNldFRpbWUoZGF0ZVRpbWVTdGFtcCk7XHJcbiAgICAgICAgdmFyIE55ZWFyID0gZGF0ZXRpbWUuZ2V0RnVsbFllYXIoKTtcclxuICAgICAgICB2YXIgTm1vbnRoID0gZGF0ZXRpbWUuZ2V0TW9udGgoKSArIDEgPCAxMCA/IFwiMFwiICsgKGRhdGV0aW1lLmdldE1vbnRoKCkgKyAxKSA6IGRhdGV0aW1lLmdldE1vbnRoKCkgKyAxO1xyXG4gICAgICAgIHZhciBOZGF0ZSA9IGRhdGV0aW1lLmdldERhdGUoKSA8IDEwID8gXCIwXCIgKyBkYXRldGltZS5nZXREYXRlKCkgOiBkYXRldGltZS5nZXREYXRlKCk7XHJcbiAgICAgICAgLy92YXIgTmhvdXIgPSBkYXRldGltZS5nZXRIb3VycygpIDwgMTAgPyBcIjBcIiArIGRhdGV0aW1lLmdldEhvdXJzKCkgOiBkYXRldGltZS5nZXRIb3VycygpO1xyXG4gICAgICAgIC8vdmFyIE5taW51dGUgPSBkYXRldGltZS5nZXRNaW51dGVzKCkgPCAxMCA/IFwiMFwiICsgZGF0ZXRpbWUuZ2V0TWludXRlcygpIDogZGF0ZXRpbWUuZ2V0TWludXRlcygpO1xyXG4gICAgICAgIC8vdmFyIE5zZWNvbmQgPSBkYXRldGltZS5nZXRTZWNvbmRzKCkgPCAxMCA/IFwiMFwiICsgZGF0ZXRpbWUuZ2V0U2Vjb25kcygpIDogZGF0ZXRpbWUuZ2V0U2Vjb25kcygpO1xyXG4gICAgICAgIHJlc3VsdCA9IE55ZWFyICsgXCItXCIgKyBObW9udGggKyBcIi1cIiArIE5kYXRlXHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH0sXHJcbiAgICBzZWFyY2g6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgdGhpcy5zZXREYXRhISh7IHBhZ2VJbmRleDogMSB9KTtcclxuICAgICAgdGhpcy5nZXRMaXN0KCk7XHJcbiAgICB9LFxyXG4gICAgZ2V0TGlzdDogZnVuY3Rpb24gKCkge1xyXG4gICAgICBsZXQgdGhhdCA9IHRoaXM7XHJcbiAgICAgIGFwcC5mdW5jLnBvc3QoJy9jaGFuZ2VMaXN0JywgeyBwYWdlSW5kZXg6IHRoaXMuZGF0YS5wYWdlSW5kZXgsIHBhZ2VTaXplOiB0aGlzLmRhdGEucGFnZVNpemUsIGtleXdvcmQ6IHRoaXMuZGF0YS5rZXl3b3JkIH0sIGZ1bmN0aW9uIChyZXNwb25zZTogQXJrUmVzcCkge1xyXG4gICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkge1xyXG5cclxuICAgICAgICAgIGxldCBsaXN0ID0gcmVzcG9uc2UuZGF0YTtcclxuXHJcbiAgICAgICAgICBsaXN0LmZvckVhY2goKGl0ZW06IGFueSkgPT4ge1xyXG4gICAgICAgICAgICBpdGVtLmNyZWF0ZWR0aW1lID0gdGhhdC5nZXRUaW1lQWdvKG5ldyBEYXRlKGl0ZW0uQ3JlYXRlZEF0KS5nZXRUaW1lKCkpO1xyXG4gICAgICAgICAgfSlcclxuXHJcblxyXG4gICAgICAgICAgdGhhdC5zZXREYXRhISh7IGNoYW5nZUxpc3Q6IGxpc3QgfSk7XHJcbiAgICAgICAgICB3eC5wYWdlU2Nyb2xsVG8oe1xyXG4gICAgICAgICAgICBzY3JvbGxUb3A6IDAsXHJcbiAgICAgICAgICAgIGR1cmF0aW9uOiAxNTBcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgfSxcclxuICAgIGtleXdvcmRJbnB1dDogZnVuY3Rpb24gKGU6IGFueSkge1xyXG4gICAgICBsZXQga2V5d29yZCA9IGUuZGV0YWlsLnZhbHVlO1xyXG4gICAgICB0aGlzLnNldERhdGEhKHsga2V5d29yZDoga2V5d29yZCB9KTtcclxuICAgIH0sXHJcbiAgICBuZXh0UGFnZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICBsZXQgcGFnZSA9IHRoaXMuZGF0YS5wYWdlSW5kZXggKyAxO1xyXG4gICAgICB0aGlzLnNldERhdGEhKHsgcGFnZUluZGV4OiBwYWdlIH0pO1xyXG4gICAgICB0aGlzLmdldExpc3QoKTtcclxuICAgIH0sXHJcbiAgICBsYXN0UGFnZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICBsZXQgcGFnZSA9IHRoaXMuZGF0YS5wYWdlSW5kZXg7XHJcbiAgICAgIHRoaXMuc2V0RGF0YSEoeyBwYWdlSW5kZXg6IHBhZ2UtLSB9KTtcclxuICAgICAgdGhpcy5nZXRMaXN0KCk7XHJcbiAgICB9LFxyXG4gICAgLy8g5LiA6ZSu5aSN5Yi25LqL5Lu2XHJcbiAgICBjb3B5QnRuOiBmdW5jdGlvbiAoZTogYW55KSB7XHJcbiAgICAgIHd4LnNldENsaXBib2FyZERhdGEoe1xyXG4gICAgICAgIC8v5YeG5aSH5aSN5Yi255qE5pWw5o2uXHJcbiAgICAgICAgZGF0YTogZS50YXJnZXQuZGF0YXNldC5uYW1lLFxyXG4gICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgIHd4LnNob3dUb2FzdCh7XHJcbiAgICAgICAgICAgIHRpdGxlOiAn5aSN5Yi25oiQ5YqfJyxcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgfSxcclxuICBsaWZldGltZXM6IHtcclxuICAgIC8vIOeUn+WRveWRqOacn+WHveaVsO+8jOWPr+S7peS4uuWHveaVsO+8jOaIluS4gOS4quWcqG1ldGhvZHPmrrXkuK3lrprkuYnnmoTmlrnms5XlkI1cclxuICAgIGF0dGFjaGVkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIHRoaXMuZ2V0TGlzdCgpO1xyXG4gICAgfSxcclxuICAgIHJlYWR5OiBmdW5jdGlvbiAoKSB7XHJcbiAgICB9LFxyXG4gICAgbW92ZWQ6IGZ1bmN0aW9uICgpIHtcclxuICAgIH0sXHJcbiAgICBkZXRhY2hlZDogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIH0sXHJcblxyXG4gIH0sXHJcbiAgcGFnZUxpZmV0aW1lczoge1xyXG4gICAgLy8g57uE5Lu25omA5Zyo6aG16Z2i55qE55Sf5ZG95ZGo5pyf5aOw5piO5a+56LGh77yM55uu5YmN5LuF5pSv5oyB6aG16Z2i55qEc2hvd+WSjGhpZGXkuKTkuKrnlJ/lkb3lkajmnJ9cclxuICAgIHNob3c6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgdGhpcy5nZXRMaXN0KCk7XHJcbiAgICB9LFxyXG4gICAgaGlkZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICBjb25zb2xlLmxvZygnQ29tcG9uZW50LTEgcGFnZUxpZmV0aW1lcyA+PiBIaWRlJyk7XHJcbiAgICB9XHJcbiAgfVxyXG59KSJdfQ==