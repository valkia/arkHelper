"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var app = getApp();
Component({
    options: {
        addGlobalClass: true,
    },
    data: {
        changeList: [],
        CustomBar: app.globalData.CustomBar,
        keyword: '',
        pageIndex: 1,
        pageSize: 10
    },
    methods: {
        getTimeAgo: function (dateTimeStamp) {
            let result = "";
            var minute = 1000 * 60;
            var hour = minute * 60;
            var day = hour * 24;
            var week = day * 7;
            var halfamonth = day * 15;
            var month = day * 30;
            var now = new Date().getTime();
            console.log(now);
            var diffValue = now - dateTimeStamp;
            if (diffValue < 0) {
                return;
            }
            var minC = diffValue / minute;
            var hourC = diffValue / hour;
            var dayC = diffValue / day;
            var weekC = diffValue / week;
            var monthC = diffValue / month;
            if (monthC >= 1 && monthC <= 3) {
                result = " " + parseInt(monthC) + "月前";
            }
            else if (weekC >= 1 && weekC <= 3) {
                result = " " + parseInt(weekC) + "周前";
            }
            else if (dayC >= 1 && dayC <= 6) {
                result = " " + parseInt(dayC) + "天前";
            }
            else if (hourC >= 1 && hourC <= 23) {
                result = " " + parseInt(hourC) + "小时前";
            }
            else if (minC >= 1 && minC <= 59) {
                result = " " + parseInt(minC) + "分钟前";
            }
            else if (diffValue >= 0 && diffValue <= minute) {
                result = "刚刚";
            }
            else {
                var datetime = new Date();
                datetime.setTime(dateTimeStamp);
                var Nyear = datetime.getFullYear();
                var Nmonth = datetime.getMonth() + 1 < 10 ? "0" + (datetime.getMonth() + 1) : datetime.getMonth() + 1;
                var Ndate = datetime.getDate() < 10 ? "0" + datetime.getDate() : datetime.getDate();
                var Nhour = datetime.getHours() < 10 ? "0" + datetime.getHours() : datetime.getHours();
                var Nminute = datetime.getMinutes() < 10 ? "0" + datetime.getMinutes() : datetime.getMinutes();
                var Nsecond = datetime.getSeconds() < 10 ? "0" + datetime.getSeconds() : datetime.getSeconds();
                result = Nyear + "-" + Nmonth + "-" + Ndate;
            }
            return result;
        },
        search: function () {
            this.setData({ pageIndex: 1 });
            this.getList();
        },
        getList: function () {
            let that = this;
            app.func.post('/changeList', { pageIndex: this.data.pageIndex, pageSize: this.data.pageSize, keyword: this.data.keyword }, function (response) {
                if (response.status === 200) {
                    let list = response.data;
                    list.forEach((item) => {
                        item.createdtime = that.getTimeAgo(new Date(item.CreatedAt).getTime());
                    });
                    that.setData({ changeList: list });
                    wx.pageScrollTo({
                        scrollTop: 0,
                        duration: 150
                    });
                }
            });
        },
        keywordInput: function (e) {
            let keyword = e.detail.value;
            this.setData({ keyword: keyword });
        },
        nextPage: function () {
            let page = this.data.pageIndex + 1;
            this.setData({ pageIndex: page });
            this.getList();
        },
        lastPage: function () {
            let page = this.data.pageIndex;
            this.setData({ pageIndex: page-- });
            this.getList();
        }
    },
    lifetimes: {
        attached: function () {
            this.getList();
        },
        ready: function () {
        },
        moved: function () {
        },
        detached: function () {
        },
    },
    pageLifetimes: {
        show: function () {
            this.getList();
        },
        hide: function () {
            console.log('Component-1 pageLifetimes >> Hide');
        }
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGlzdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImxpc3QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFDQSxJQUFJLEdBQUcsR0FBRyxNQUFNLEVBQUUsQ0FBQTtBQUdsQixTQUFTLENBQUM7SUFDUixPQUFPLEVBQUU7UUFDUCxjQUFjLEVBQUUsSUFBSTtLQUNyQjtJQUNELElBQUksRUFBRTtRQUNKLFVBQVUsRUFBRyxFQUFFO1FBQ2YsU0FBUyxFQUFFLEdBQUcsQ0FBQyxVQUFVLENBQUMsU0FBUztRQUNuQyxPQUFPLEVBQUMsRUFBRTtRQUNWLFNBQVMsRUFBQyxDQUFDO1FBQ1gsUUFBUSxFQUFDLEVBQUU7S0FDWjtJQUlELE9BQU8sRUFBRTtRQUNQLFVBQVUsRUFBRSxVQUFVLGFBQXFCO1lBQ3pDLElBQUksTUFBTSxHQUFHLEVBQUUsQ0FBQztZQUNoQixJQUFJLE1BQU0sR0FBRyxJQUFJLEdBQUcsRUFBRSxDQUFDO1lBQ3ZCLElBQUksSUFBSSxHQUFHLE1BQU0sR0FBRyxFQUFFLENBQUM7WUFDdkIsSUFBSSxHQUFHLEdBQUcsSUFBSSxHQUFHLEVBQUUsQ0FBQztZQUNwQixJQUFJLElBQUksR0FBRyxHQUFHLEdBQUcsQ0FBQyxDQUFDO1lBQ25CLElBQUksVUFBVSxHQUFHLEdBQUcsR0FBRyxFQUFFLENBQUM7WUFDMUIsSUFBSSxLQUFLLEdBQUcsR0FBRyxHQUFHLEVBQUUsQ0FBQztZQUNyQixJQUFJLEdBQUcsR0FBRyxJQUFJLElBQUksRUFBRSxDQUFDLE9BQU8sRUFBRSxDQUFDO1lBQy9CLE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUE7WUFDbEIsSUFBSSxTQUFTLEdBQUcsR0FBRyxHQUFHLGFBQWEsQ0FBQztZQUVsQyxJQUFHLFNBQVMsR0FBRyxDQUFDLEVBQUU7Z0JBQ2hCLE9BQU87YUFDUjtZQUNILElBQUksSUFBSSxHQUFHLFNBQVMsR0FBRyxNQUFNLENBQUM7WUFFNUIsSUFBSSxLQUFLLEdBQUcsU0FBUyxHQUFH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QUFDO1FBQ3RDLENBQUM7UUFDRCxRQUFRLEVBQUM7WUFDUCxJQUFJLElBQUksR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsR0FBQyxDQUFDLENBQUM7WUFDakMsSUFBSSxDQUFDLE9BQVEsQ0FBQyxFQUFFLFNBQVMsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDO1lBQ25DLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUNqQixDQUFDO1FBQ0QsUUFBUSxFQUFFO1lBQ1IsSUFBSSxJQUFJLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUM7WUFDL0IsSUFBSSxDQUFDLE9BQVEsQ0FBQyxFQUFFLFNBQVMsRUFBRSxJQUFJLEVBQUUsRUFBRSxDQUFDLENBQUM7WUFDckMsSUFBSSxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBQ2pCLENBQUM7S0FDRjtJQUNELFNBQVMsRUFBRTtRQUVULFFBQVEsRUFBRTtZQUNSLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUNqQixDQUFDO1FBQ0QsS0FBSyxFQUFFO1FBQ1AsQ0FBQztRQUNELEtBQUssRUFBRTtRQUNOLENBQUM7UUFDRixRQUFRLEVBQUU7UUFFVCxDQUFDO0tBRUg7SUFDRCxhQUFhLEVBQUU7UUFFYixJQUFJLEVBQUU7WUFDSixJQUFJLENBQUMsT0FBTyxFQUFFLENBQUM7UUFDakIsQ0FBQztRQUNELElBQUksRUFBRTtZQUNKLE9BQU8sQ0FBQyxHQUFHLENBQUMsbUNBQW1DLENBQUMsQ0FBQztRQUNuRCxDQUFDO0tBQ0Y7Q0FDRixDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBwYWdlcy9jaGFuZ2UvbGlzdC9saXN0LmpzXHJcbnZhciBhcHAgPSBnZXRBcHAoKVxyXG4vL0B0cy1pZ25vcmVcclxuaW1wb3J0IEFya1Jlc3AgPSByZXF1aXJlKCcuLi8uLi9tb2RlbC9BcmtSZXNwLmpzJyk7XHJcbkNvbXBvbmVudCh7XHJcbiAgb3B0aW9uczoge1xyXG4gICAgYWRkR2xvYmFsQ2xhc3M6IHRydWUsXHJcbiAgfSxcclxuICBkYXRhOiB7XHJcbiAgICBjaGFuZ2VMaXN0IDogW10sXHJcbiAgICBDdXN0b21CYXI6IGFwcC5nbG9iYWxEYXRhLkN1c3RvbUJhcixcclxuICAgIGtleXdvcmQ6JycsXHJcbiAgICBwYWdlSW5kZXg6MSxcclxuICAgIHBhZ2VTaXplOjEwXHJcbiAgfSxcclxuXHJcblxyXG5cclxuICBtZXRob2RzOiB7XHJcbiAgICBnZXRUaW1lQWdvOiBmdW5jdGlvbiAoZGF0ZVRpbWVTdGFtcDogbnVtYmVyKXsgICAvL2RhdGVUaW1lU3RhbXDmmK/kuIDkuKrml7bpl7Tmr6vnp5LvvIzms6jmhI/ml7bpl7TmiLPmmK/np5LnmoTlvaLlvI/vvIzlnKjov5nkuKrmr6vnp5LnmoTln7rnoYDkuIrpmaTku6UxMDAw77yM5bCx5piv5Y2B5L2N5pWw55qE5pe26Ze05oiz44CCMTPkvY3mlbDnmoTpg73mmK/ml7bpl7Tmr6vnp5LjgIJcclxuICAgICAgbGV0IHJlc3VsdCA9IFwiXCI7XHJcbiAgICAgIHZhciBtaW51dGUgPSAxMDAwICogNjA7ICAgICAgLy/miorliIbvvIzml7bvvIzlpKnvvIzlkajvvIzljYrkuKrmnIjvvIzkuIDkuKrmnIjnlKjmr6vnp5LooajnpLpcclxuICAgICAgdmFyIGhvdXIgPSBtaW51dGUgKiA2MDtcclxuICAgICAgdmFyIGRheSA9IGhvdXIgKiAyNDtcclxuICAgICAgdmFyIHdlZWsgPSBkYXkgKiA3O1xyXG4gICAgICB2YXIgaGFsZmFtb250aCA9IGRheSAqIDE1O1xyXG4gICAgICB2YXIgbW9udGggPSBkYXkgKiAzMDtcclxuICAgICAgdmFyIG5vdyA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOyAgIC8v6I635Y+W5b2T5YmN5pe26Ze05q+r56eSXHJcbiAgICAgIGNvbnNvbGUubG9nKG5vdylcclxuICAgIHZhciBkaWZmVmFsdWUgPSBub3cgLSBkYXRlVGltZVN0YW1wOy8v5pe26Ze05beuXHJcblxyXG4gICAgICBpZihkaWZmVmFsdWUgPCAwKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICB2YXIgbWluQyA9IGRpZmZWYWx1ZSAvIG1pbnV0ZTsgIFxyXG4gICAgLy/orqHnrpfml7bpl7Tlt67nmoTliIbvvIzml7bvvIzlpKnvvIzlkajvvIzmnIhcclxuICAgICAgdmFyIGhvdXJDID0gZGlmZlZhbHVlIC8gaG91cjtcclxuICAgICAgdmFyIGRheUMgPSBkaWZmVmFsdWUgLyBkYXk7XHJcbiAgICAgIHZhciB3ZWVrQyA9IGRpZmZWYWx1ZSAvIHdlZWs7XHJcbiAgICAgIHZhciBtb250aEMgPSBkaWZmVmFsdWUgLyBtb250aDtcclxuICAgICAgaWYobW9udGhDID49IDEgJiYgbW9udGhDIDw9IDMpe1xyXG4gIHJlc3VsdCA9IFwiIFwiICsgcGFyc2VJbnQobW9udGhDKSArIFwi5pyI5YmNXCJcclxufWVsc2UgaWYgKHdlZWtDID49IDEgJiYgd2Vla0MgPD0gMykge1xyXG4gIHJlc3VsdCA9IFwiIFwiICsgcGFyc2VJbnQod2Vla0MpICsgXCLlkajliY1cIlxyXG59IGVsc2UgaWYgKGRheUMgPj0gMSAmJiBkYXlDIDw9IDYpIHtcclxuICByZXN1bHQgPSBcIiBcIiArIHBhcnNlSW50KGRheUMpICsgXCLlpKnliY1cIlxyXG59IGVsc2UgaWYgKGhvdXJDID49IDEgJiYgaG91ckMgPD0gMjMpIHtcclxuICByZXN1bHQgPSBcIiBcIiArIHBhcnNlSW50KGhvdXJDKSArIFwi5bCP5pe25YmNXCJcclxufSBlbHNlIGlmIChtaW5DID49IDEgJiYgbWluQyA8PSA1OSkge1xyXG4gIHJlc3VsdCA9IFwiIFwiICsgcGFyc2VJbnQobWluQykgKyBcIuWIhumSn+WJjVwiXHJcbn0gZWxzZSBpZiAoZGlmZlZhbHVlID49IDAgJiYgZGlmZlZhbHVlIDw9IG1pbnV0ZSkge1xyXG4gIHJlc3VsdCA9IFwi5Yia5YiaXCJcclxufSBlbHNlIHtcclxuICB2YXIgZGF0ZXRpbWUgPSBuZXcgRGF0ZSgpO1xyXG4gIGRhdGV0aW1lLnNldFRpbWUoZGF0ZVRpbWVTdGFtcCk7XHJcbiAgdmFyIE55ZWFyID0gZGF0ZXRpbWUuZ2V0RnVsbFllYXIoKTtcclxuICB2YXIgTm1vbnRoID0gZGF0ZXRpbWUuZ2V0TW9udGgoKSArIDEgPCAxMCA/IFwiMFwiICsgKGRhdGV0aW1lLmdldE1vbnRoKCkgKyAxKSA6IGRhdGV0aW1lLmdldE1vbnRoKCkgKyAxO1xyXG4gIHZhciBOZGF0ZSA9IGRhdGV0aW1lLmdldERhdGUoKSA8IDEwID8gXCIwXCIgKyBkYXRldGltZS5nZXREYXRlKCkgOiBkYXRldGltZS5nZXREYXRlKCk7XHJcbiAgdmFyIE5ob3VyID0gZGF0ZXRpbWUuZ2V0SG91cnMoKSA8IDEwID8gXCIwXCIgKyBkYXRldGltZS5nZXRIb3VycygpIDogZGF0ZXRpbWUuZ2V0SG91cnMoKTtcclxuICB2YXIgTm1pbnV0ZSA9IGRhdGV0aW1lLmdldE1pbnV0ZXMoKSA8IDEwID8gXCIwXCIgKyBkYXRldGltZS5nZXRNaW51dGVzKCkgOiBkYXRldGltZS5nZXRNaW51dGVzKCk7XHJcbiAgdmFyIE5zZWNvbmQgPSBkYXRldGltZS5nZXRTZWNvbmRzKCkgPCAxMCA/IFwiMFwiICsgZGF0ZXRpbWUuZ2V0U2Vjb25kcygpIDogZGF0ZXRpbWUuZ2V0U2Vjb25kcygpO1xyXG4gIHJlc3VsdCA9IE55ZWFyICsgXCItXCIgKyBObW9udGggKyBcIi1cIiArIE5kYXRlXHJcbn1cclxucmV0dXJuIHJlc3VsdDtcclxufSxcclxuICAgIHNlYXJjaDpmdW5jdGlvbigpe1xyXG4gICAgICB0aGlzLnNldERhdGEhKHsgcGFnZUluZGV4OiAxIH0pO1xyXG4gICAgICB0aGlzLmdldExpc3QoKTtcclxuICAgIH0sXHJcbiAgICBnZXRMaXN0OmZ1bmN0aW9uKCl7XHJcbiAgICAgIGxldCB0aGF0ID0gdGhpcztcclxuICAgICAgYXBwLmZ1bmMucG9zdCgnL2NoYW5nZUxpc3QnLCB7IHBhZ2VJbmRleDogdGhpcy5kYXRhLnBhZ2VJbmRleCwgcGFnZVNpemU6IHRoaXMuZGF0YS5wYWdlU2l6ZSwga2V5d29yZDogdGhpcy5kYXRhLmtleXdvcmQgIH0sIGZ1bmN0aW9uIChyZXNwb25zZTogQXJrUmVzcCkge1xyXG4gICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDIwMCkge1xyXG5cclxuICAgICAgICAgIGxldCBsaXN0ID0gcmVzcG9uc2UuZGF0YTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgbGlzdC5mb3JFYWNoKChpdGVtOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgaXRlbS5jcmVhdGVkdGltZSA9IHRoYXQuZ2V0VGltZUFnbyhuZXcgRGF0ZShpdGVtLkNyZWF0ZWRBdCkuZ2V0VGltZSgpKTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICBcclxuXHJcbiAgICAgICAgICB0aGF0LnNldERhdGEhKHsgY2hhbmdlTGlzdDogbGlzdCB9KTtcclxuICAgICAgICAgIHd4LnBhZ2VTY3JvbGxUbyh7XHJcbiAgICAgICAgICAgIHNjcm9sbFRvcDogMCxcclxuICAgICAgICAgICAgZHVyYXRpb246IDE1MFxyXG4gICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICB9LFxyXG4gICAga2V5d29yZElucHV0OiBmdW5jdGlvbiAoZTogYW55KXtcclxuICAgICAgICBsZXQga2V5d29yZCA9IGUuZGV0YWlsLnZhbHVlO1xyXG4gICAgICB0aGlzLnNldERhdGEhKHsga2V5d29yZDoga2V5d29yZCB9KTtcclxuICAgIH0sXHJcbiAgICBuZXh0UGFnZTpmdW5jdGlvbigpe1xyXG4gICAgICBsZXQgcGFnZSA9IHRoaXMuZGF0YS5wYWdlSW5kZXgrMTtcclxuICAgICAgdGhpcy5zZXREYXRhISh7IHBhZ2VJbmRleDogcGFnZSB9KTtcclxuICAgICAgdGhpcy5nZXRMaXN0KCk7XHJcbiAgICB9LFxyXG4gICAgbGFzdFBhZ2U6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgbGV0IHBhZ2UgPSB0aGlzLmRhdGEucGFnZUluZGV4O1xyXG4gICAgICB0aGlzLnNldERhdGEhKHsgcGFnZUluZGV4OiBwYWdlLS0gfSk7XHJcbiAgICAgIHRoaXMuZ2V0TGlzdCgpO1xyXG4gICAgfVxyXG4gIH0sXHJcbiAgbGlmZXRpbWVzOiB7XHJcbiAgICAvLyDnlJ/lkb3lkajmnJ/lh73mlbDvvIzlj6/ku6XkuLrlh73mlbDvvIzmiJbkuIDkuKrlnKhtZXRob2Rz5q615Lit5a6a5LmJ55qE5pa55rOV5ZCNXHJcbiAgICBhdHRhY2hlZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICB0aGlzLmdldExpc3QoKTtcclxuICAgIH0sXHJcbiAgICByZWFkeTogZnVuY3Rpb24gKCkge1xyXG4gICAgfSxcclxuICAgIG1vdmVkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgfSxcclxuICAgIGRldGFjaGVkOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIFxyXG4gICAgIH0sXHJcbiAgICBcclxuICB9LFxyXG4gIHBhZ2VMaWZldGltZXM6IHtcclxuICAgIC8vIOe7hOS7tuaJgOWcqOmhtemdoueahOeUn+WRveWRqOacn+WjsOaYjuWvueixoe+8jOebruWJjeS7heaUr+aMgemhtemdoueahHNob3flkoxoaWRl5Lik5Liq55Sf5ZG95ZGo5pyfXHJcbiAgICBzaG93OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIHRoaXMuZ2V0TGlzdCgpO1xyXG4gICAgfSxcclxuICAgIGhpZGU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgY29uc29sZS5sb2coJ0NvbXBvbmVudC0xIHBhZ2VMaWZldGltZXMgPj4gSGlkZScpO1xyXG4gICAgfVxyXG4gIH1cclxufSkiXX0=